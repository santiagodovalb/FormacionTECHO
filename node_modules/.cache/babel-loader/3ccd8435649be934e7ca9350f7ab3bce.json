{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{setUser}from\"../../redux/user\";import axios from\"axios\";import SedeCard from\"./SedeCard\";import\"./Sedes.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Sedes=function Sedes(){var dispatch=useDispatch();var history=useHistory();var user=useSelector(function(state){return state.user;});var sedesPrueba=useSelector(function(state){return state.sedes;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sedes=_useState4[0],setSedes=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectSede=_useState6[0],setSelectSede=_useState6[1];var _useState7=useState({key:\"\",style:\"btn bi bi-check-circle-fill check-style\"}),_useState8=_slicedToArray(_useState7,2),stateIcon=_useState8[0],setStateIcon=_useState8[1];useEffect(function(){if(!sedes.length)setSedes(_toConsumableArray(sedesPrueba));setStateIcon(function(s){return _objectSpread(_objectSpread({},s),{},{key:selectSede});});},[form,selectSede,sedes,sedesPrueba]);var handleChange=function handleChange(e){var target=e.target;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},target.name,target.value)));};var handleSearch=function handleSearch(e){e.preventDefault();if(form.search&&form.search.length)setSedes(sedesPrueba.filter(function(sede){return sede.nombre.toLowerCase().indexOf(form.search.toLowerCase())>=0;}));else{setSedes(sedesPrueba);setStateIcon(_objectSpread(_objectSpread({},stateIcon),{},{key:\"\"}));}};var onSaveSede=function onSaveSede(){axios.put(\"/api/users/\".concat(user.id),{sedeId:selectSede}).then(function(res){return res.data;}).then(function(user){dispatch(setUser(user));history.push(\"/user\");}).catch(function(err){return err;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"div-sedes\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"fs-3 text-secondary p-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Eleg\\xED tu sede\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex col-auto text-center\",onChange:handleChange,onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",className:\"form-control me-2 fs-4\",placeholder:\"Buscar sede\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",type:\"submit\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sedes mt-5\",children:sedes===null||sedes===void 0?void 0:sedes.map(function(sede,index){return/*#__PURE__*/_jsx(SedeCard,{id:\"\".concat(sede.id),button:{text:\"\".concat(sede.nombre),styles:\"button-style  light-blue fs-5\"},icon:\"btn bi bi-circle-fill uncheck-style\",setState:setSelectSede,stateIcon:stateIcon},\"\".concat(sede.id));})}),/*#__PURE__*/_jsx(\"div\",{className:\" guardarButton \",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-4 p-3 fs-4 button-style green\",onClick:onSaveSede,children:\"Guardar\"})})]});};export default Sedes;","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/src/containers/Sedes/Sedes.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","useHistory","setUser","axios","SedeCard","Sedes","dispatch","history","user","state","sedesPrueba","sedes","form","setForm","setSedes","selectSede","setSelectSede","key","style","stateIcon","setStateIcon","length","s","handleChange","e","target","name","value","handleSearch","preventDefault","search","filter","sede","nombre","toLowerCase","indexOf","onSaveSede","put","id","sedeId","then","res","data","push","catch","err","map","index","text","styles"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { setUser } from \"../../redux/user\";\nimport axios from \"axios\";\nimport SedeCard from \"./SedeCard\";\nimport \"./Sedes.css\";\n\nconst Sedes = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector((state) => state.user);\n  const sedesPrueba = useSelector((state) => state.sedes);\n  const [form, setForm] = useState({});\n  const [sedes, setSedes] = useState([]);\n  const [selectSede, setSelectSede] = useState(\"\");\n  const [stateIcon, setStateIcon] = useState({\n    key: \"\",\n    style: \"btn bi bi-check-circle-fill check-style\",\n  });\n\n  useEffect(() => {\n    if (!sedes.length) setSedes([...sedesPrueba]);\n    setStateIcon((s) => {\n      return {\n        ...s,\n        key: selectSede,\n      };\n    });\n  }, [form, selectSede, sedes, sedesPrueba]);\n\n  const handleChange = (e) => {\n    const { target } = e;\n    setForm({ ...form, [target.name]: target.value });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    if (form.search && form.search.length)\n      setSedes(\n        sedesPrueba.filter(\n          (sede) =>\n            sede.nombre.toLowerCase().indexOf(form.search.toLowerCase()) >= 0\n        )\n      );\n    else {\n      setSedes(sedesPrueba);\n      setStateIcon({\n        ...stateIcon,\n        key: \"\",\n      });\n    }\n  };\n\n  const onSaveSede = () => {\n    axios\n      .put(`/api/users/${user.id}`, { sedeId: selectSede })\n      .then((res) => {\n        return res.data;\n      })\n      .then((user) => {\n        dispatch(setUser(user));\n        history.push(\"/user\");\n      })\n      .catch((err) => err);\n  };\n\n  return (\n    <div className=\"div-sedes\">\n        \n          <h1 className=\"fs-3 text-secondary p-5\">\n            <strong>ElegÃ­ tu sede</strong>\n          </h1>\n\n      <div className=\"justify-content-center align-items-center\">\n        <form\n          className=\"d-flex col-auto text-center\"\n          onChange={handleChange}\n          onSubmit={handleSearch}\n        >\n          <input\n            type=\"text\"\n            name=\"search\"\n            className=\"form-control me-2 fs-4\"\n            placeholder=\"Buscar sede\"\n          />\n          <button className=\"btn btn-outline-secondary\" type=\"submit\">\n            <i className=\"bi bi-search\"></i>\n          </button>\n        </form>\n      </div>\n      <div className=\"sedes mt-5\">\n        {sedes?.map((sede, index) => {\n          return (\n            <SedeCard\n              key={`${sede.id}`}\n              id={`${sede.id}`}\n              button={{\n                text: `${sede.nombre}`,\n                styles: \"button-style  light-blue fs-5\",\n              }}\n              icon=\"btn bi bi-circle-fill uncheck-style\"\n              setState={setSelectSede}\n              stateIcon={stateIcon}\n            />\n          );\n        })}\n      </div>\n      <div className=\" guardarButton \">\n        <button\n          className=\"my-4 p-3 fs-4 button-style green\"\n          onClick={onSaveSede}\n        >\n          Guardar\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Sedes;\n"]},"metadata":{},"sourceType":"module"}