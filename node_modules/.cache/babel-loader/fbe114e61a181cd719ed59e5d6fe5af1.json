{"ast":null,"code":"import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{getRoles}from\"../../../redux/roles\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import axios from\"axios\";import{useSelector}from\"react-redux\";import Roles from\"./Roles\";import useAuthorize from\"../../../utils/authorization\";import\"./AdminRoles.css\";import{message,Input,Form,Button}from\"antd\";import isValid from\"../../../utils/specialChars\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminRoles(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var dispatch=useDispatch();var user=useSelector(function(state){return state.user;});var handleSubmit=function handleSubmit(){if(!isValid(form.tipo))return message.error(\"No se permiten caracteres especiales\");axios.post(\"/api/roles/\",form).then(function(res){if(res.data){message.success(\"Rol creado correctamente\");}}).then(function(){return dispatch(getRoles());}).catch(function(err){return message.error(\"Rol no creado\");});};var handleChange=function handleChange(obj1,obj2){setForm(obj2);};var toggleForm=function toggleForm(){document.getElementById(\"newRole\").style.display=document.getElementById(\"newRole\").style.display===\"block\"?\"none\":\"block\";};useAuthorize(user,1);return/*#__PURE__*/_jsxs(\"div\",{className:\"adminRoles\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"fs-2 text-secondary text-center p-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Gestionar roles\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleForm,className:\"mb-5 p-3 fs-4 button-style green\",children:\"Crear nuevo rol\"}),/*#__PURE__*/_jsx(\"div\",{className:\"createRol\",children:/*#__PURE__*/_jsxs(Form,{style:{display:\"none\"},name:\"newRole\",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:true},onValuesChange:function onValuesChange(obj,obj2){return handleChange(obj,obj2);},onFinish:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Tipo de rol\",name:\"tipo\",children:/*#__PURE__*/_jsx(Input.TextArea,{})}),/*#__PURE__*/_jsx(Button,{style:{display:form.tipo?\"block\":\"none\"},htmlType:\"submit\",type:\"submit\",children:\"Crear rol\"})]})}),/*#__PURE__*/_jsx(Roles,{})]});}","map":null,"metadata":{},"sourceType":"module"}