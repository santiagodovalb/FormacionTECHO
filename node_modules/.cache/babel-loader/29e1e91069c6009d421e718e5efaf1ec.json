{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch}from\"react-redux\";import{setUser}from\"./redux/user\";import{Route,Switch,useHistory}from\"react-router-dom\";import axios from\"axios\";import Sidebar from\"./components/SideBar/Sidebar\";import Navbar from\"./components/Navbar/Navbar\";import Login from\"./containers/Login/Login.jsx\";import Routes from'./Routes.jsx';import{useLocation}from\"react-router\";import{getRoles}from\"./redux/roles\";import{getSedes}from\"./redux/sedes\";import{getBloques}from\"../src/redux/bloques\";import{setUsers}from\"./redux/users\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var dispatch=useDispatch();var location=useLocation();var history=useHistory();useEffect(function(){dispatch(setUsers()).then(function(){return dispatch(getBloques());}).then(function(){return dispatch(getSedes());}).then(function(){return dispatch(getRoles());}).then(function(){return dispatch(getBloques());});axios.get(\"/api/users/me\").then(function(res){return res.data;}).then(function(user){return axios.get(\"/api/users/\".concat(user.id));}).then(function(res){return res.data;}).then(function(user){return dispatch(setUser(user));}).catch(function(err){if(location.pathname!=='/adminlogin')history.push('/');});},[dispatch,history,location.pathname]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[location.pathname!=='/'&&location.pathname!=='/adminlogin'&&/*#__PURE__*/_jsx(Sidebar,{}),location.pathname!=='/'&&location.pathname!=='/adminlogin'&&/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/adminlogin\",component:Login}),/*#__PURE__*/_jsx(Route,{component:Routes})]})]});}export default App;","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/src/App.jsx"],"names":["React","useEffect","useDispatch","setUser","Route","Switch","useHistory","axios","Sidebar","Navbar","Login","Routes","useLocation","getRoles","getSedes","getBloques","setUsers","App","dispatch","location","history","then","get","res","data","user","id","catch","err","pathname","push"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,OAAT,KAAwB,cAAxB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,UAAxB,KAA0C,kBAA1C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,8BAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,QAAT,KAAyB,eAAzB,CACA,OAASC,QAAT,KAAyB,eAAzB,CACA,OAASC,UAAT,KAA2B,sBAA3B,CACA,OAASC,QAAT,KAAyB,eAAzB,CACA,MAAO,WAAP,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CACA,GAAMiB,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEAL,SAAS,CAAC,UAAM,CACZiB,QAAQ,CAACF,QAAQ,EAAT,CAAR,CACCK,IADD,CACM,iBAAMH,CAAAA,QAAQ,CAACH,UAAU,EAAX,CAAd,EADN,EAECM,IAFD,CAEM,iBAAMH,CAAAA,QAAQ,CAACJ,QAAQ,EAAT,CAAd,EAFN,EAGCO,IAHD,CAGM,iBAAMH,CAAAA,QAAQ,CAACL,QAAQ,EAAT,CAAd,EAHN,EAICQ,IAJD,CAIM,iBAAMH,CAAAA,QAAQ,CAACH,UAAU,EAAX,CAAd,EAJN,EAMAR,KAAK,CAACe,GAAN,CAAU,eAAV,EACCD,IADD,CACM,SAACE,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAb,EADN,EAECH,IAFD,CAEM,SAACI,IAAD,QAAUlB,CAAAA,KAAK,CAACe,GAAN,sBAAwBG,IAAI,CAACC,EAA7B,EAAV,EAFN,EAGCL,IAHD,CAGM,SAACE,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAb,EAHN,EAICH,IAJD,CAIM,SAACI,IAAD,QAAUP,CAAAA,QAAQ,CAACf,OAAO,CAACsB,IAAD,CAAR,CAAlB,EAJN,EAKCE,KALD,CAKO,SAAAC,GAAG,CAAI,CACZ,GAAIT,QAAQ,CAACU,QAAT,GAAsB,aAA1B,CAAyCT,OAAO,CAACU,IAAR,CAAa,GAAb,EAC1C,CAPD,EASH,CAhBQ,CAgBN,CAACZ,QAAD,CAAWE,OAAX,CAAoBD,QAAQ,CAACU,QAA7B,CAhBM,CAAT,CAkBA,mBACE,aAAK,SAAS,CAAC,KAAf,WACIV,QAAQ,CAACU,QAAT,GAAsB,GAAtB,EAA6BV,QAAQ,CAACU,QAAT,GAAsB,aAApD,eAAsE,KAAC,OAAD,IADzE,CAEIV,QAAQ,CAACU,QAAT,GAAsB,GAAtB,EAA6BV,QAAQ,CAACU,QAAT,GAAsB,aAApD,eAAsE,KAAC,MAAD,IAFzE,cAGE,MAAC,MAAD,yBACI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEnB,KAAjC,EADJ,cAEI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,aAAlB,CAAgC,SAAS,CAAEA,KAA3C,EAFJ,cAGI,KAAC,KAAD,EAAO,SAAS,CAAEC,MAAlB,EAHJ,GAHF,GADF,CAWD,CAED,cAAeM,CAAAA,GAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"./redux/user\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Sidebar from \"./components/SideBar/Sidebar\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport Login from \"./containers/Login/Login.jsx\"\nimport Routes from './Routes.jsx'\nimport { useLocation } from \"react-router\";\nimport { getRoles } from \"./redux/roles\";\nimport { getSedes } from \"./redux/sedes\";\nimport { getBloques } from \"../src/redux/bloques\";\nimport { setUsers } from \"./redux/users\";\nimport \"./App.css\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useHistory()\n\n  useEffect(() => {\n      dispatch(setUsers())\n      .then(() => dispatch(getBloques()))\n      .then(() => dispatch(getSedes()))\n      .then(() => dispatch(getRoles()))\n      .then(() => dispatch(getBloques()))\n\n      axios.get(\"/api/users/me\")\n      .then((res) => res.data)\n      .then((user) => axios.get(`/api/users/${user.id}`))\n      .then((res) => res.data)\n      .then((user) => dispatch(setUser(user)))\n      .catch(err => {\n        if (location.pathname !== '/adminlogin') history.push('/')\n      })\n\n  }, [dispatch, history, location.pathname]);\n\n  return (\n    <div className=\"App\">\n      {(location.pathname !== '/' && location.pathname !== '/adminlogin') && <Sidebar />}\n      {(location.pathname !== '/' && location.pathname !== '/adminlogin') && <Navbar />}        \n      <Switch>\n          <Route exact path=\"/\" component={Login} />\n          <Route exact path=\"/adminlogin\" component={Login} />\n          <Route component={Routes} />\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}