{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch}from\"react-redux\";import{setUser}from\"./redux/user\";import{Route,Switch,useHistory}from\"react-router-dom\";import axios from\"axios\";import Sidebar from\"./components/SideBar/Sidebar\";import Navbar from\"./components/Navbar/Navbar\";import Login from\"./containers/Login/Login.jsx\";import Routes from'./Routes.jsx';import{useLocation}from\"react-router\";import{getRoles}from\"./redux/roles\";import{getSedes}from\"./redux/sedes\";import{getBloques}from\"../src/redux/bloques\";import{setUsers}from\"./redux/users\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var dispatch=useDispatch();var location=useLocation();var history=useHistory();useEffect(function(){dispatch(setUsers()).then(function(){return dispatch(getBloques());}).then(function(){return dispatch(getSedes());}).then(function(){return dispatch(getRoles());}).then(function(){return dispatch(getBloques());});axios.get(\"/api/users/me\").then(function(res){return res.data;}).then(function(user){return axios.get(\"/api/users/\".concat(user.id));}).then(function(res){return res.data;}).then(function(user){return dispatch(setUser(user));}).catch(function(err){if(location.pathname!=='/adminlogin')history.push('/');});},[dispatch,history,location.pathname]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[location.pathname!=='/'&&location.pathname!=='/adminlogin'&&/*#__PURE__*/_jsx(Sidebar,{}),location.pathname!=='/'&&location.pathname!=='/adminlogin'&&/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/adminlogin\",component:Login}),/*#__PURE__*/_jsx(Route,{component:Routes})]})]});}export default App;","map":null,"metadata":{},"sourceType":"module"}