{"ast":null,"code":"var _jsxFileName = \"/home/santi/P5/TECHO/formacion-techo/src/containers/Admin/AdminBloques/CrearBloque.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Form, Input, Radio } from \"antd\";\nimport { getBloques } from \"../../../redux/bloques\";\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CrearBloque() {\n  _s();\n\n  const [form, setForm] = useState({\n    rolesId: []\n  });\n  const [roles, setRoles] = useState([]);\n  const user = useSelector(state => state.user);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    axios.get(\"/api/roles\").then(res => res.data).then(roles => roles.filter(rol => rol.id >= 3)).then(roles => setRoles(roles));\n  }, []);\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleMinimo = e => {\n    let boolean = e.target.id === \"si\" ? true : false;\n    setForm({ ...form,\n      minimo: boolean\n    });\n  };\n\n  const handleRoles = e => {\n    let array = [...form.rolesId];\n    e.target.checked ? array = [...array, e.target.value] : array.splice(form.rolesId.indexOf(e.target.value), 1);\n    setForm({ ...form,\n      rolesId: [...array]\n    });\n  };\n\n  if (user.rolId && user.rolId !== 1) {\n    history.push(\"/unauthorized\");\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No autorizado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  const handleSubmit = e => {\n    axios.post(\"/api/bloques\", form).then(res => {\n      dispatch(getBloques());\n      history.push(\"/admin-bloques\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Crear nuevo bloque de formaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 13\n      },\n      onFinish: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        className: \"admin_input\",\n        label: \"T\\xEDtulo\",\n        name: \"titulo\",\n        rules: [{\n          required: true,\n          message: \"Por favor complete el campo\"\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          name: \"titulo\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        className: \"admin_input\",\n        label: \"Descripci\\xF3n\",\n        name: \"descripcion\",\n        rules: [{\n          required: true,\n          message: \"Por favor complete el campo\"\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          name: \"descripcion\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        className: \"admin_input\",\n        label: \"Pregunta\",\n        name: \"pregunta\",\n        rules: [{\n          required: true,\n          message: \"Por favor complete el campo\"\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          name: \"pregunta\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Es bloque m\\xEDnimo?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Radio.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Radio.Button, {\n            id: \"si\",\n            value: \"si\",\n            onChange: handleMinimo,\n            children: \"Si\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n            id: \"no\",\n            value: \"no\",\n            onChange: handleMinimo,\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"A que roles esta destinado?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), roles.map(rol => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            value: rol.id,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"admin_check\",\n              htmlFor: rol.tipo,\n              children: rol.tipo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"roles\",\n              value: rol.id,\n              id: rol.id,\n              onChange: handleRoles\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            htmlType: \"submit\",\n            className: \"mb-3 mt-3 p-3 fs-3 button-style light-blue\",\n            children: \"Crear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CrearBloque, \"sBZENei1HCUJomSr1RdDEzZCrZo=\", false, function () {\n  return [useSelector, useHistory, useDispatch];\n});\n\n_c = CrearBloque;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrearBloque\");","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/src/containers/Admin/AdminBloques/CrearBloque.jsx"],"names":["axios","React","useState","useEffect","useHistory","useDispatch","useSelector","Form","Input","Radio","getBloques","CrearBloque","form","setForm","rolesId","roles","setRoles","user","state","history","dispatch","get","then","res","data","filter","rol","id","handleChange","e","target","name","value","handleMinimo","boolean","minimo","handleRoles","array","checked","splice","indexOf","rolId","push","handleSubmit","post","span","required","message","map","tipo"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Form, Input, Radio } from \"antd\";\nimport { getBloques } from \"../../../redux/bloques\";\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\n\nexport default function CrearBloque() {\n  const [form, setForm] = useState({ rolesId: [] });\n  const [roles, setRoles] = useState([]);\n  const user = useSelector((state) => state.user);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    axios\n      .get(\"/api/roles\")\n      .then((res) => res.data)\n      .then((roles) => roles.filter((rol) => rol.id >= 3))\n      .then((roles) => setRoles(roles));\n  }, []);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleMinimo = (e) => {\n    let boolean = e.target.id === \"si\" ? true : false;\n    setForm({ ...form, minimo: boolean });\n  };\n\n  const handleRoles = (e) => {\n    let array = [...form.rolesId];\n    e.target.checked\n      ? (array = [...array, e.target.value])\n      : array.splice(form.rolesId.indexOf(e.target.value), 1);\n    setForm({ ...form, rolesId: [...array] });\n  };\n\n  if (user.rolId && user.rolId !== 1) {\n    history.push(\"/unauthorized\");\n    return (\n      <>\n        <h1>No autorizado</h1>\n      </>\n    );\n  }\n\n  const handleSubmit = (e) => {\n    axios.post(\"/api/bloques\", form).then((res) => {\n      dispatch(getBloques());\n      history.push(\"/admin-bloques\");\n    });\n  };\n\n  return (\n    <>\n      <div className=\"admin\">\n        <h1>Crear nuevo bloque de formación</h1>\n      </div>\n      <Form\n        labelCol={{\n          span: 5,\n        }}\n        wrapperCol={{\n          span: 13,\n        }}\n        onFinish={handleSubmit}\n      >\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Título\"\n          name=\"titulo\"\n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input name=\"titulo\" onChange={handleChange} />\n        </Form.Item>\n\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Descripción\"\n          name=\"descripcion\"\n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input name=\"descripcion\" onChange={handleChange} />\n        </Form.Item>\n\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Pregunta\"\n          name=\"pregunta\" \n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input name=\"pregunta\" onChange={handleChange} />\n        </Form.Item>\n        <div className=\"admin\">\n          <h5>Es bloque mínimo?</h5>\n          <Radio.Group>\n            <Radio.Button id=\"si\" value=\"si\" onChange={handleMinimo}>\n              Si\n            </Radio.Button>\n            <Radio.Button id=\"no\" value=\"no\" onChange={handleMinimo}>\n              No\n            </Radio.Button>\n          </Radio.Group>\n          <br />\n          <h5>A que roles esta destinado?</h5>\n          {roles.map((rol) => {\n            return (\n              <div value={rol.id}> \n                <label className=\"admin_check\" htmlFor={rol.tipo}>\n                  {rol.tipo}\n                </label>\n                  <input\n                    type=\"checkbox\"\n                    name=\"roles\"\n                    value={rol.id}\n                    id={rol.id}\n                    onChange={handleRoles}\n                  />\n              </div>\n            );\n          })}\n          <br />\n          <Form.Item>\n            <button htmlType=\"submit\" className=\"mb-3 mt-3 p-3 fs-3 button-style light-blue\">\n              Crear\n            </button>\n          </Form.Item>\n        </div>\n      </Form>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}