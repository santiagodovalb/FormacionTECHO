{"ast":null,"code":"import _toConsumableArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState}from\"react\";import{useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Form,Input,Radio,message}from\"antd\";import{getBloques}from\"../../../redux/bloques\";import isValid from\"../../../utils/specialChars\";import useAuthorize from\"../../../utils/authorization\";import\"antd/dist/antd.css\";import\"./AdminBloques.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CrearBloque(){var _useState=useState({rolesId:[]}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var user=useSelector(function(state){return state.user;});var history=useHistory();var dispatch=useDispatch();useAuthorize(user,1);useEffect(function(){axios.get(\"/api/roles\").then(function(res){return res.data;}).then(function(roles){return roles.filter(function(rol){return rol.id>=3;});}).then(function(roles){return setRoles(roles);});},[]);var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleMinimo=function handleMinimo(e){var boolean=e.target.id===\"si\"?true:false;setForm(_objectSpread(_objectSpread({},form),{},{minimo:boolean}));};var handleRoles=function handleRoles(e){var array=_toConsumableArray(form.rolesId);e.target.checked?array=[].concat(_toConsumableArray(array),[e.target.value]):array.splice(form.rolesId.indexOf(e.target.value),1);setForm(_objectSpread(_objectSpread({},form),{},{rolesId:_toConsumableArray(array)}));};var handleSubmit=function handleSubmit(e){if(!isValid(form.titulo))return message.error(\"No se permiten caracteres especiales\");axios.post(\"/api/bloques\",form).then(function(res){dispatch(getBloques());history.push(\"/admin-bloques\");});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"fs-2 text-secondary m-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Crear nuevo bloque de formaci\\xF3n\"})})}),/*#__PURE__*/_jsxs(Form,{labelCol:{span:5},wrapperCol:{span:13},onFinish:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"T\\xEDtulo\",name:\"titulo\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input,{name:\"titulo\",onChange:handleChange})}),/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"Descripci\\xF3n\",name:\"descripcion\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input,{name:\"descripcion\",onChange:handleChange})}),/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"Preguntas\",name:\"pregunta\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input.TextArea,{name:\"pregunta\",onChange:handleChange})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\xBFEs bloque m\\xEDnimo?\"}),/*#__PURE__*/_jsxs(Radio.Group,{children:[/*#__PURE__*/_jsx(Radio.Button,{id:\"si\",value:\"si\",onChange:handleMinimo,children:\"Si\"}),/*#__PURE__*/_jsx(Radio.Button,{id:\"no\",value:\"no\",onChange:handleMinimo,children:\"No\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{children:\"\\xBFA qu\\xE9 roles est\\xE1 destinado?\"}),roles.map(function(rol){return/*#__PURE__*/_jsxs(\"div\",{value:rol.id,children:[/*#__PURE__*/_jsx(\"label\",{className:\"admin_check\",htmlFor:rol.tipo,children:rol.tipo}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"roles\",value:rol.id,id:rol.id,onChange:handleRoles})]});}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(\"button\",{htmlType:\"submit\",className:\"my-3 p-2 fs-4 button-style green\",children:\"Crear\"})})]})]})]});}","map":null,"metadata":{},"sourceType":"module"}