{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{message}from\"antd\";import useAuthorize from\"../../../utils/authorization\";import isValid from\"../../../utils/specialChars\";import\"./CrearGestor.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CrearGestor(){var _useState=useState({rolId:2}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var user=useSelector(function(state){return state.user;});var sedes=useSelector(function(state){return state.sedes;});var history=useHistory();useEffect(function(){var options=\"<option selected>Seleccionar Sede</sede>\";for(var i=0;i<sedes.length;i++){var _sedes$i,_sedes$i2;options+=\"<option value=\".concat((_sedes$i=sedes[i])===null||_sedes$i===void 0?void 0:_sedes$i.id,\">\").concat((_sedes$i2=sedes[i])===null||_sedes$i2===void 0?void 0:_sedes$i2.nombre,\"</option>\");}document.getElementById(\"sedes\").innerHTML=options;},[sedes,user]);useAuthorize(user,1);var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(form.confirmPassword===form.password){if(!isValid(form.password)||!isValid(form.full_name)){return message.error(\"No se permiten caracteres especiales\");}axios.post(\"/api/users/create\",form).then(function(res){if(res.data){message.success(\"Gestor creado correctamente\");}}).then(function(){history.push(\"/admin-usuarios\");}).catch(function(err){return message.warning(\"Mail ya existente\");});}else{message.warning(\"Las constraseñas no coinciden\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"justify-content-center align-items-center text-center py-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"fs-2 text-secondary\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Crear Gestor\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"formGestor\",className:\"col col-xl-4 my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",onChange:handleChange,name:\"full_name\",placeholder:\"Nombre Completo\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",onChange:handleChange,name:\"email\",placeholder:\"Email\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",onChange:handleChange,name:\"password\",placeholder:\"Contrase\\xF1a de acceso\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",onChange:handleChange,name:\"confirmPassword\",placeholder:\"Confirme la contrase\\xF1a\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"select\",{required:true,id:\"sedes\",type:\"text\",onChange:handleChange,name:\"sedeId\",placeholder:\"Sede\",className:\"form-select\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-style green button-style-form my-3 p-2 fs-4\",children:\"Crear\"})]})]});}","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/src/containers/Admin/CrearGestor/CrearGestor.jsx"],"names":["axios","React","useEffect","useState","useSelector","useHistory","message","useAuthorize","isValid","CrearGestor","rolId","form","setForm","user","state","sedes","history","options","i","length","id","nombre","document","getElementById","innerHTML","handleChange","e","target","name","value","handleSubmit","preventDefault","confirmPassword","password","full_name","error","post","then","res","data","success","push","catch","err","warning"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { message } from \"antd\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport isValid from \"../../../utils/specialChars\";\nimport \"./CrearGestor.css\";\n\nexport default function CrearGestor() {\n  const [form, setForm] = useState({ rolId: 2 });\n  const user = useSelector((state) => state.user);\n\n  const sedes = useSelector((state) => state.sedes);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    let options = \"<option selected>Seleccionar Sede</sede>\";\n    for (var i = 0; i < sedes.length; i++) {\n      options += `<option value=${sedes[i]?.id}>${sedes[i]?.nombre}</option>`;\n    }\n    document.getElementById(\"sedes\").innerHTML = options;\n  }, [sedes, user]);\n\n  useAuthorize(user, 1);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (form.confirmPassword === form.password) {\n      if (!isValid(form.password) || !isValid(form.full_name)) {\n        return message.error(\"No se permiten caracteres especiales\");\n      }\n      axios\n        .post(\"/api/users/create\", form)\n        .then((res) => {\n          if (res.data) {\n            message.success(\"Gestor creado correctamente\");\n          }\n        })\n        .then(() => {\n          history.push(\"/admin-usuarios\");\n        })\n        .catch((err) => message.warning(\"Mail ya existente\"));\n    } else {\n      message.warning(\"Las constraseñas no coinciden\");\n    }\n  };\n\n  return (\n    <div className=\"justify-content-center align-items-center text-center py-5\">\n      <h1 className=\"fs-2 text-secondary\">\n        <strong>Crear Gestor</strong>\n      </h1>\n      <form\n        onSubmit={handleSubmit}\n        id=\"formGestor\"\n        className=\"col col-xl-4 my-5\"\n      >\n        <div className=\"mb-3\">\n          <input\n            required\n            type=\"text\"\n            onChange={handleChange}\n            name=\"full_name\"\n            placeholder=\"Nombre Completo\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required\n            type=\"text\"\n            onChange={handleChange}\n            name=\"email\"\n            placeholder=\"Email\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required\n            type=\"password\"\n            onChange={handleChange}\n            name=\"password\"\n            placeholder=\"Contraseña de acceso\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required\n            type=\"password\"\n            onChange={handleChange}\n            name=\"confirmPassword\"\n            placeholder=\"Confirme la contraseña\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <select\n            required\n            id=\"sedes\"\n            type=\"text\"\n            onChange={handleChange}\n            name=\"sedeId\"\n            placeholder=\"Sede\"\n            className=\"form-select\"\n          />\n        </div>\n        <button\n          type=\"submit\"\n          className=\"button-style green button-style-form my-3 p-2 fs-4\"\n        >\n          Crear\n        </button>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}