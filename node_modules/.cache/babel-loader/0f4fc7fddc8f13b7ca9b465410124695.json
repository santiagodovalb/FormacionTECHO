{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"../Login\";import{useDispatch}from\"react-redux\";import{setUser}from\"../../../redux/user\";import{useHistory}from\"react-router\";import axios from'axios';import{message}from'antd';import'antd/dist/antd.css';import validator from'validator';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginAdmin=function LoginAdmin(){var dispatch=useDispatch();var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var onChange=function onChange(e){var target=e.target;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},target.name,target.value)));};var isEmail=function isEmail(){return validator.isEmail(form.email);};var onSubmit=function onSubmit(e){e.preventDefault();if(isEmail()){axios.post(\"/api/users/login\",form).then(function(res){return res.data;}).then(function(user){return axios.get(\"/api/users/\".concat(user.id));}).then(function(res){return res.data;}).then(function(user){dispatch(setUser(user));message.success('Logged in');history.push(\"/user\");}).catch(function(err){message.error('Bad credentials');return err;});}};return/*#__PURE__*/_jsxs(\"form\",{className:\"pb-3\",onChange:onChange,onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Correo\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"Contrase\\xF1a\",required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-secondary mt-3\",children:\"Ingresar\"})]});};export default LoginAdmin;","map":null,"metadata":{},"sourceType":"module"}