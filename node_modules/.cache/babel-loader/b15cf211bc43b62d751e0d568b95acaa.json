{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{message}from\"antd\";import useAuthorize from\"../../../utils/authorization\";import isValid from\"../../../utils/specialChars\";import\"./CrearGestor.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CrearGestor(){var _useState=useState({rolId:2}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var user=useSelector(function(state){return state.user;});var sedes=useSelector(function(state){return state.sedes;});var history=useHistory();useEffect(function(){var options=\"<option selected>Seleccionar Sede</sede>\";for(var i=0;i<sedes.length;i++){var _sedes$i,_sedes$i2;options+=\"<option value=\".concat((_sedes$i=sedes[i])===null||_sedes$i===void 0?void 0:_sedes$i.id,\">\").concat((_sedes$i2=sedes[i])===null||_sedes$i2===void 0?void 0:_sedes$i2.nombre,\"</option>\");}document.getElementById(\"sedes\").innerHTML=options;},[sedes,user]);useAuthorize(user,1);var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(form.confirmPassword===form.password){if(!isValid(form.password)||!isValid(form.full_name)){return message.error(\"No se permiten caracteres especiales\");}axios.post(\"/api/users/create\",form).then(function(res){if(res.data){message.success(\"Gestor creado correctamente\");}}).then(function(){history.push(\"/admin-usuarios\");}).catch(function(err){return message.warning(\"Mail ya existente\");});}else{message.warning(\"Las constrase√±as no coinciden\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"justify-content-center align-items-center text-center py-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"fs-2 text-secondary\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Crear Gestor\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"formGestor\",className:\"col col-xl-4 my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",onChange:handleChange,name:\"full_name\",placeholder:\"Nombre Completo\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",onChange:handleChange,name:\"email\",placeholder:\"Email\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",onChange:handleChange,name:\"password\",placeholder:\"Contrase\\xF1a de acceso\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",onChange:handleChange,name:\"confirmPassword\",placeholder:\"Confirme la contrase\\xF1a\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"select\",{required:true,id:\"sedes\",type:\"text\",onChange:handleChange,name:\"sedeId\",placeholder:\"Sede\",className:\"form-select\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-style green button-style-form my-3 p-2 fs-4\",children:\"Crear\"})]})]});}","map":null,"metadata":{},"sourceType":"module"}