{"ast":null,"code":"var _jsxFileName = \"/home/santi/P5/TECHO/formacion-techo/src/containers/Admin/CrearGestor/index.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { message } from \"antd\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport isValid from \"../../../utils/specialChars\";\nimport \"./index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CrearGestor() {\n  _s();\n\n  const [form, setForm] = useState({\n    rolId: 2\n  });\n  const user = useSelector(state => state.user);\n  const sedes = useSelector(state => state.sedes);\n  const history = useHistory();\n  useEffect(() => {\n    let options = \"<option value=''>Seleccionar Sede</sede>\";\n\n    for (var i = 0; i < sedes.length; i++) {\n      var _sedes$i, _sedes$i2;\n\n      options += `<option value=${(_sedes$i = sedes[i]) === null || _sedes$i === void 0 ? void 0 : _sedes$i.id}>${(_sedes$i2 = sedes[i]) === null || _sedes$i2 === void 0 ? void 0 : _sedes$i2.nombre}</option>`;\n    }\n\n    document.getElementById(\"sedes\").innerHTML = options;\n  }, [sedes, user]);\n  useAuthorize(user, 1);\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (form.confirmPassword === form.password) {\n      if (!isValid(form.password) || !isValid(form.full_name)) {\n        return message.error(\"No se permiten caracteres especiales\");\n      }\n\n      axios.post(\"/api/users/create\", form).then(res => {\n        if (res.data) {\n          message.success(\"Gestor creado correctamente\");\n        }\n      }).then(() => {\n        history.push(\"/admin-usuarios\");\n      }).catch(err => message.warning(\"Mail ya existente\"));\n    } else {\n      message.warning(\"Las constrase√±as no coinciden\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"justify-content-center align-items-center text-center py-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"fs-2 text-secondary\",\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Crear Gestor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      id: \"formGestor\",\n      className: \"col col-xl-4 my-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          required: \"true\",\n          type: \"text\",\n          onChange: handleChange,\n          name: \"full_name\",\n          placeholder: \"Nombre Completo\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          required: \"true\",\n          type: \"text\",\n          onChange: handleChange,\n          name: \"email\",\n          placeholder: \"Email\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          required: \"true\",\n          type: \"password\",\n          onChange: handleChange,\n          name: \"password\",\n          placeholder: \"Contrase\\xF1a de acceso\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          required: \"true\",\n          type: \"password\",\n          onChange: handleChange,\n          name: \"confirmPassword\",\n          placeholder: \"Confirme la contrase\\xF1a\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          required: true,\n          id: \"sedes\",\n          type: \"text\",\n          onChange: handleChange,\n          name: \"sedeId\",\n          placeholder: \"Sede\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"button-style light-blue fs-3 my-3 py-2 button-style-form\",\n        children: \"Crear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CrearGestor, \"jKs3r8nPhentpo6cWXEojEoJ1iQ=\", false, function () {\n  return [useSelector, useSelector, useHistory, useAuthorize];\n});\n\n_c = CrearGestor;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrearGestor\");","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/src/containers/Admin/CrearGestor/index.jsx"],"names":["axios","React","useEffect","useState","useSelector","useHistory","message","useAuthorize","isValid","CrearGestor","form","setForm","rolId","user","state","sedes","history","options","i","length","id","nombre","document","getElementById","innerHTML","handleChange","e","target","name","value","handleSubmit","preventDefault","confirmPassword","password","full_name","error","post","then","res","data","success","push","catch","err","warning"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAAQC,OAAR,QAAuB,MAAvB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,OAAO,aAAP;;AAEA,eAAe,SAASC,WAAT,GAAuB;AAAA;;AACpC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC;AAAES,IAAAA,KAAK,EAAE;AAAT,GAAD,CAAhC;AACA,QAAMC,IAAI,GAAGT,WAAW,CAACU,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAxB;AAGA,QAAME,KAAK,GAAIX,WAAW,CAAEU,KAAD,IAAWA,KAAK,CAACC,KAAlB,CAA1B;AAEA,QAAMC,OAAO,GAAGX,UAAU,EAA1B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,OAAO,GAAG,0CAAd;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAA;;AACrCD,MAAAA,OAAO,IAAK,iBAAD,YAAiBF,KAAK,CAACG,CAAD,CAAtB,6CAAiB,SAAUE,EAAG,IAA9B,aAAiCL,KAAK,CAACG,CAAD,CAAtC,8CAAiC,UAAUG,MAAO,WAA7D;AACD;;AACDC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,SAAjC,GAA6CP,OAA7C;AACD,GANQ,EAMN,CAACF,KAAD,EAAQF,IAAR,CANM,CAAT;AAQAN,EAAAA,YAAY,CAACM,IAAD,EAAO,CAAP,CAAZ;;AAEA,QAAMY,YAAY,GAAIC,CAAD,IAAO;AAC1Bf,IAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,OAACgB,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAArC,KAAD,CAAP;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAIJ,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACK,cAAF;;AACA,QAAGrB,IAAI,CAACsB,eAAL,KAAyBtB,IAAI,CAACuB,QAAjC,EAA0C;AACxC,UAAI,CAACzB,OAAO,CAACE,IAAI,CAACuB,QAAN,CAAR,IAA2B,CAACzB,OAAO,CAACE,IAAI,CAACwB,SAAN,CAAvC,EAAyD;AACvD,eAAO5B,OAAO,CAAC6B,KAAR,CAAc,sCAAd,CAAP;AACD;;AACDnC,MAAAA,KAAK,CACFoC,IADH,CACQ,mBADR,EAC6B1B,IAD7B,EAEG2B,IAFH,CAESC,GAAD,IAAQ;AACZ,YAAGA,GAAG,CAACC,IAAP,EAAY;AACRjC,UAAAA,OAAO,CAACkC,OAAR,CAAgB,6BAAhB;AACD;AACF,OANL,EAOKH,IAPL,CAOU,MAAI;AACRrB,QAAAA,OAAO,CAACyB,IAAR,CAAa,iBAAb;AACD,OATL,EAUKC,KAVL,CAUWC,GAAG,IAAErC,OAAO,CAACsC,OAAR,CAAgB,mBAAhB,CAVhB;AAWD,KAfD,MAeK;AACHtC,MAAAA,OAAO,CAACsC,OAAR,CAAgB,+BAAhB;AACD;AAEF,GArBD;;AAuBA,sBACE;AAAK,IAAA,SAAS,EAAC,4DAAf;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,qBAAd;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAM,MAAA,QAAQ,EAAEd,YAAhB;AAA8B,MAAA,EAAE,EAAC,YAAjC;AAA6C,MAAA,SAAS,EAAC,mBAAvD;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AACE,UAAA,QAAQ,EAAC,MADX;AAEE,UAAA,IAAI,EAAC,MAFP;AAGE,UAAA,QAAQ,EAAEL,YAHZ;AAIE,UAAA,IAAI,EAAC,WAJP;AAKE,UAAA,WAAW,EAAC,iBALd;AAME,UAAA,SAAS,EAAC;AANZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAWE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AACE,UAAA,QAAQ,EAAC,MADX;AAEE,UAAA,IAAI,EAAC,MAFP;AAGE,UAAA,QAAQ,EAAEA,YAHZ;AAIE,UAAA,IAAI,EAAC,OAJP;AAKE,UAAA,WAAW,EAAC,OALd;AAME,UAAA,SAAS,EAAC;AANZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAXF,eAqBE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AACE,UAAA,QAAQ,EAAC,MADX;AAEE,UAAA,IAAI,EAAC,UAFP;AAGE,UAAA,QAAQ,EAAEA,YAHZ;AAIE,UAAA,IAAI,EAAC,UAJP;AAKE,UAAA,WAAW,EAAC,yBALd;AAME,UAAA,SAAS,EAAC;AANZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cArBF,eA+BE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AACE,UAAA,QAAQ,EAAC,MADX;AAEE,UAAA,IAAI,EAAC,UAFP;AAGE,UAAA,QAAQ,EAAEA,YAHZ;AAIE,UAAA,IAAI,EAAC,iBAJP;AAKE,UAAA,WAAW,EAAC,2BALd;AAME,UAAA,SAAS,EAAC;AANZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cA/BF,eAyCE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AACE,UAAA,QAAQ,MADV;AAEE,UAAA,EAAE,EAAC,OAFL;AAGE,UAAA,IAAI,EAAC,MAHP;AAIE,UAAA,QAAQ,EAAEA,YAJZ;AAKE,UAAA,IAAI,EAAC,QALP;AAME,UAAA,WAAW,EAAC,MANd;AAOE,UAAA,SAAS,EAAC;AAPZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAzCF,eAoDE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,0DAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cApDF;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkED;;GAhHuBhB,W;UAETL,W,EAGEA,W,EAECC,U,EAUhBE,Y;;;KAjBsBE,W","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport {message} from  \"antd\"\nimport useAuthorize from \"../../../utils/authorization\";\nimport isValid from \"../../../utils/specialChars\";\nimport \"./index.css\";\n\nexport default function CrearGestor() {\n  const [form, setForm] = useState({ rolId: 2 });\n  const user = useSelector(state => state.user)\n\n  \n  const sedes =  useSelector((state) => state.sedes)\n  \n  const history = useHistory();\n  \n  useEffect(() => {\n    let options = \"<option value=''>Seleccionar Sede</sede>\";\n    for (var i = 0; i < sedes.length; i++) {\n      options += `<option value=${sedes[i]?.id}>${sedes[i]?.nombre}</option>`;\n    }\n    document.getElementById(\"sedes\").innerHTML = options;\n  }, [sedes, user]);\n  \n  useAuthorize(user, 1)\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if(form.confirmPassword === form.password){\n      if (!isValid(form.password) || !isValid(form.full_name)) {\n        return message.error(\"No se permiten caracteres especiales\")\n      }\n      axios\n        .post(\"/api/users/create\", form)\n        .then((res) =>{\n          if(res.data){\n              message.success(\"Gestor creado correctamente\");\n            }\n          })\n          .then(()=>{\n            history.push(\"/admin-usuarios\")\n          })\n          .catch(err=>message.warning(\"Mail ya existente\"))\n    }else{\n      message.warning(\"Las constrase√±as no coinciden\")\n    }\n      \n  };\n\n  return (\n    <div className=\"justify-content-center align-items-center text-center py-5\">\n      <h1 className=\"fs-2 text-secondary\">\n        <strong>Crear Gestor</strong>\n      </h1>\n      <form onSubmit={handleSubmit} id=\"formGestor\"className=\"col col-xl-4 my-5\">\n        <div className=\"mb-3\">\n          <input\n            required=\"true\"\n            type=\"text\"\n            onChange={handleChange}\n            name=\"full_name\"\n            placeholder=\"Nombre Completo\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required=\"true\"\n            type=\"text\"\n            onChange={handleChange}\n            name=\"email\"\n            placeholder=\"Email\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required=\"true\"\n            type=\"password\"\n            onChange={handleChange}\n            name=\"password\"\n            placeholder=\"Contrase√±a de acceso\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <input\n            required=\"true\"\n            type=\"password\"\n            onChange={handleChange}\n            name=\"confirmPassword\"\n            placeholder=\"Confirme la contrase√±a\"\n            className=\"form-control\"\n          />\n        </div>\n        <div className=\"mb-3\">\n          <select\n            required\n            id=\"sedes\"\n            type=\"text\"\n            onChange={handleChange}\n            name=\"sedeId\"\n            placeholder=\"Sede\"\n            className=\"form-control\"\n          />\n        </div>\n        <button\n          type=\"submit\"\n          className=\"button-style light-blue fs-3 my-3 py-2 button-style-form\"\n        >\n          Crear\n        </button>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}