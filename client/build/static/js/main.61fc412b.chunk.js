(this["webpackJsonpformacion-techo"]=this["webpackJsonpformacion-techo"]||[]).push([[0],{201:function(e,t,n){},202:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},262:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},375:function(e,t,n){},454:function(e,t,n){},522:function(e,t,n){},531:function(e,t,n){},532:function(e,t,n){},536:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){},543:function(e,t,n){"use strict";n.r(t);n(262);var c=n(1),r=n.n(c),a=n(40),s=n.n(a),i=n(11),o=n(7),l=n(37),u=Object(l.b)("SET-USER"),d=Object(l.d)({},Object(o.a)({},u,(function(e,t){return t.payload}))),b=n(24),j=n(14),m=n.n(j),f=n(31),h=n(89),O=n(111),x=n(81),p=n(2),v=[{rolId:1,list:[{link:"/admin-crear-gestor",name:"Crear Gestor",icon:Object(p.jsx)(x.a,{})},{link:"/admin-bloques",name:"Gestionar Bloques",icon:Object(p.jsx)(h.a,{})},{link:"/admin-usuarios",name:"Gestionar Usuarios",icon:Object(p.jsx)(x.d,{})},{link:"/admin-sedes",name:"Gestionar Sedes",icon:Object(p.jsx)(O.a,{})},{link:"/admin-roles",name:"Gestionar Roles",icon:Object(p.jsx)(x.a,{})},{link:"/admin/dashboard",name:"Panel Nacional",icon:Object(p.jsx)(x.c,{})}]},{rolId:2,list:[{link:"/gestor/voluntarios",name:"Gestionar voluntarios",icon:Object(p.jsx)(x.d,{})},{link:"/gestor/entregas",name:"Gestionar entregas",icon:Object(p.jsx)(x.b,{})},{link:"/gestor/dashboard",name:"Panel de sede",icon:Object(p.jsx)(x.c,{})}]},{rolId:3,list:[{link:"/mis-bloques",name:"Mis Bloques",icon:Object(p.jsx)(h.a,{})},{link:"/mis-entregas",name:"Mis Entregas",icon:Object(p.jsx)(x.b,{})},{link:"/sede",name:"Elegir o modificar sede",icon:Object(p.jsx)(O.a,{})}]}];var g=function(){var e=Object(i.c)((function(e){return e.user})),t=Object(b.h)().pathname;return Object(p.jsxs)("div",{children:[(void 0!==e.rolId||null===e.rolId)&&function(n,c){var r=function(t,n){return null===e.rolId||e.rolId>3?t.find((function(e){return 3===e.rolId})):t.find((function(e){return e.rolId===n}))}(n,c);return 1===c?Object(p.jsxs)("li",{children:[Object(p.jsx)("strong",{children:Object(p.jsxs)("h6",{className:"btn btn-toggle link-light fs-5 fw-bolder",style:{padding:"0px 16px"},"data-bs-toggle":"collapse","data-bs-target":"#orders-collapse",children:[Object(p.jsx)(h.c,{})," Ver m\xe1s"]})}),Object(p.jsx)("div",{className:"collapse",id:"orders-collapse",children:Object(p.jsx)("ul",{className:"btn-toggle-nav list-unstyled fw-normal pb-1 small",children:r.list.map((function(e,n){return Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(f.b,{to:"".concat(e.link),children:Object(p.jsx)("strong",{children:Object(p.jsxs)("h6",{className:t.includes(e.link)?"nav-link link-light fs-5 fw-bolder":"nav-link link-light",children:[e.icon," ",e.name]})})},c)},"navbar-".concat(c,"-").concat(n))}))})})]}):r.list.map((function(e,n){return Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(f.b,{to:"".concat(e.link),children:Object(p.jsx)("strong",{children:Object(p.jsxs)("h6",{className:t.includes(e.link)?"nav-link link-light fs-5 fw-bolder":"nav-link link-light",children:[e.icon," ",e.name]})})},c)},"navbar-".concat(c,"-").concat(n))}))}(v,e.rolId)," "]})},y=(n(184),n(293),function(){var e=Object(i.c)((function(e){return e.user})),t=Object(i.b)(),n=Object(b.g)(),c=Object(b.h)().pathname;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"sidebar d-flex flex-column flex-shrink-0 p-3",style:{width:"280px"},children:[Object(p.jsx)("img",{src:"https://static.wixstatic.com/media/602b79_9aea50902ee84caeafdbaf5b85ddfd19~mv2.png/v1/fill/w_420,h_140,al_c,q_95/Logo%20PNG%20en%20negativo.webp",alt:"logo-techo"}),Object(p.jsx)("hr",{}),Object(p.jsx)("img",{className:"volunteer_sidebar_image",src:e.img?e.img:"https://thumbs.dreamstime.com/b/default-avatar-profile-icon-vector-social-media-user-image-182145777.jpg",alt:""}),Object(p.jsx)("h4",{children:e.full_name}),Object(p.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(f.b,{to:"/user",children:Object(p.jsxs)("h6",{className:c.includes("/user")?"nav-link link-light fs-5 fw-bolder":"nav-link link-light",children:[Object(p.jsx)(h.b,{})," Mi perfil"]})})}),Object(p.jsx)(g,{})]}),Object(p.jsx)("hr",{}),e.rolId&&2===e.rolId&&Object(p.jsx)("button",{className:"btn btn-secondary",onClick:function(){n.push("/gestor-password")},children:" Cambiar contrase\xf1a "}),Object(p.jsx)("button",{className:"btn btn-secondary",onClick:function(){m.a.post("/api/users/logout").then((function(){return t(u({}))})).then((function(){return n.push("/")}))},children:"Cerrar sesi\xf3n"})]})})});var N=function(){var e,t,n=Object(i.c)((function(e){return e.user})),c=Object(b.h)().pathname;return Object(p.jsxs)("div",{children:[(void 0!==n.rolId||null===n.rolId)&&(e=v,t=n.rolId,function(e,t){return null===n.rolId||n.rolId>3?e.find((function(e){return 3===e.rolId})):e.find((function(e){return e.rolId===t}))}(e,t).list.map((function(e,n){return Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(f.b,{to:"".concat(e.link),children:Object(p.jsx)("p",{className:c.includes(e.link)?"nav-link link-light active":"nav-link link-light",children:e.name})},t)},"navbar-".concat(t,"-").concat(n))})))," "]})},I=(n(294),function(){var e=Object(i.c)((function(e){return e.user})),t=Object(i.b)(),n=Object(b.g)();return Object(p.jsx)("div",{children:Object(p.jsx)("nav",{className:"d-block d-md-none navbar navbar-expand-lg navbar-dark",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)("img",{src:"data:image/png;base64,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",alt:"logo techo"}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(p.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(f.b,{to:"/user",children:Object(p.jsx)("p",{className:"nav-link",children:"Mi perfil"})})}),Object(p.jsx)(N,{}),Object(p.jsx)("hr",{}),e.rolId&&2===e.rolId&&Object(p.jsxs)(f.b,{to:"/gestor-password",children:[" ",Object(p.jsx)("button",{children:" Cambiar contrase\xf1a "})]}),Object(p.jsxs)(f.b,{to:"/login",children:[" ",Object(p.jsx)("button",{onClick:function(){m.a.post("/api/users/logout").then((function(){return t(u({}))})).then((function(){return n.push("/")}))},children:" Cerrar sesi\xf3n"})]})]})})]})})})}),k=(n(295),n.p+"static/media/login.9ab06720.jpg"),C={width:"100vw",height:"100vh",backgroundImage:'url("'.concat(k,'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover"},q=n.p+"static/media/logo.b9e3a66f.png",S=(n(125),n(3)),w=n(8),E=n(257),B=n(248),A=n.n(B),P=function(){var e=Object(i.b)(),t=Object(b.g)(),n=Object(c.useState)({}),r=Object(w.a)(n,2),a=r[0],s=r[1];return Object(p.jsxs)("form",{className:"pb-3",onChange:function(e){var t=e.target;s(Object(S.a)(Object(S.a)({},a),{},Object(o.a)({},t.name,t.value)))},onSubmit:function(n){n.preventDefault(),A.a.isEmail(a.email)&&m.a.post("/api/users/login",a).then((function(e){return e.data})).then((function(e){return m.a.get("/api/users/".concat(e.id))})).then((function(e){return e.data})).then((function(n){e(u(n)),E.b.success("Logged in"),t.push("/user")})).catch((function(e){return E.b.error("Bad credentials"),e}))},children:[Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Correo",required:!0})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"Contrase\xf1a",required:!0})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-secondary mt-3",children:"Ingresar"})]})},T=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("a",{href:"/api/auth/google",children:Object(p.jsx)("button",{id:"Google",className:"btn btn-danger mb-3",children:"Ingresar con Google"})}),Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"/api/auth/facebook",children:Object(p.jsx)("button",{id:"Facebook",className:"btn btn-primary ",children:"Ingresar con Facebook"})})]})},F=function(){var e=Object(b.h)();return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"wh-100 m-0 row justify-content-center align-items-center",style:C,children:Object(p.jsxs)("div",{className:"col-auto text-center loggin-container p-5",children:[Object(p.jsx)("img",{src:q,className:"m-4 form-logo",alt:""}),Object(p.jsx)("div",{className:"m-4",children:Object(p.jsx)("i",{className:"bi bi-person-circle form-img"})}),"/adminlogin"===e.pathname&&P(),"/"===e.pathname&&T()]})})})};n(375);var R=function(){var e=Object(i.c)((function(e){return e.user}));return Object(p.jsxs)("div",{children:[!e.rolId&&"",1===e.rolId&&Object(p.jsx)("div",{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"En Crear Gestor vas a poder generar un nuevo usuario con rol Gestor."}),Object(p.jsx)("li",{children:"En Gestionar Bloques pod\xe9s crear, eliminar y editar bloques y m\xf3dulos."}),Object(p.jsx)("li",{children:"Para ver y eliminar los usuarios que hay registrado en la plataforma pod\xe9s ir a Gestionar Usuarios."}),Object(p.jsx)("li",{children:"Si quer\xe9s crear o eliminar una sede, and\xe1 a Gestionar Sedes."}),Object(p.jsx)("li",{children:"Por \xfaltimo, para eliminar o crear nuevos roles, visit\xe1 Gestionar Roles."})]})}),2===e.rolId&&Object(p.jsx)("div",{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"En Ver Voluntarios vas a poder ver todos los voluntarios correspondientes a tu sede y asignarles un rol."}),Object(p.jsx)("li",{children:"En Gestionar Entregas, podr\xe1s ver todas las entregas de tus voluntarios y completarlas."}),Object(p.jsx)("li",{children:'Pod\xe9s cambiar tu contrase\xf1a haciendo click en "cambiar contrase\xf1a".'})]})}),(e.rolId&&e.rolId>2||null===e.rolId)&&Object(p.jsx)("div",{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"En Mis Bloques encontrar\xe1s todos tus bloques de formaci\xf3n."}),Object(p.jsx)("li",{children:"Dentro de ellos, se encuentran los m\xf3dulos correspondientes a cada uno."}),Object(p.jsx)("li",{children:"Al finalizar un m\xf3dulo, marcalo como completado."}),Object(p.jsx)("li",{children:"Una vez completados todos, se te habilitar\xe1 la entrega del bloque."}),Object(p.jsx)("li",{children:"Para dar un bloque como finalizado, ten\xe9s que esperar a que tu gestor complete la entrega."})]})})]})},G=n(78),D=n.p+"static/media/adminLogin.dba36215.JPG",M=function(){var e,t,n,r,a=Object(i.c)((function(e){return e.user})),s=Object(b.g)();return Object(c.useEffect)((function(){}),[a]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"volunteer_profile_div",children:[Object(p.jsx)("img",{src:D,alt:"imagen de fondo",className:"profileImageBackground"}),Object(p.jsxs)("div",{className:"user_profile px-4",children:[Object(p.jsxs)("h2",{className:"text-center",children:["\xa1Bienvenid@, ",a.full_name,"!"]}),2===a.rolId&&(a.sedeId?Object(p.jsxs)("h5",{children:[Object(p.jsx)(O.a,{})," ",null===(e=a.sede)||void 0===e?void 0:e.nombre]}):Object(p.jsx)("h5",{children:"El admin debe asignarte una sede"})),(null===a.rolId||a.rolId>2)&&(a.sedeId?Object(p.jsxs)("h5",{children:[Object(p.jsx)(O.a,{})," ",null===(t=a.sede)||void 0===t?void 0:t.nombre]}):Object(p.jsx)(G.a,{type:"dashed",onClick:function(){s.push("/sede")},children:"Debes elegir una sede"})),(null===(n=a.rol)||void 0===n?void 0:n.tipo)?Object(p.jsx)("h5",{children:null===(r=a.rol)||void 0===r?void 0:r.tipo}):Object(p.jsx)("h5",{className:"text-center mt-5",children:"Ponete en contacto con tu gestor para que te asigne un rol"}),Object(p.jsxs)("div",{className:"instructions",children:[Object(p.jsx)("h4",{children:"\xbfC\xf3mo funciona el sitio?"}),Object(p.jsx)(R,{})]})]})]})})},U=(n(201),n(549)),L=function(e){for(var t=e.id,n=e.title,c=e.button,r=e.bloque,a=e.url,s=[],i=0;i<(null===r||void 0===r||null===(o=r.unidades)||void 0===o?void 0:o.length);i++){var o,l,u="true"===localStorage.getItem("check".concat(null===r||void 0===r||null===(l=r.unidades[i])||void 0===l?void 0:l.id));!0===u&&s.push(u)}return Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsxs)("div",{className:"card position-relative",children:[Object(p.jsx)("div",{className:"card-body",children:Object(p.jsx)("h3",{className:"card-title text-center",children:n})}),Object(p.jsx)("div",{className:"circle",children:Object(p.jsx)(U.a,{type:"circle",percent:Math.floor(100*s.length/(null===r||void 0===r?void 0:r.unidades.length)),format:function(){return"".concat(s.length,"/").concat(null===r||void 0===r?void 0:r.unidades.length)}})}),Object(p.jsx)(f.b,{to:a,children:Object(p.jsx)("div",{className:" ".concat(c.styles," p-3 text-center"),style:{width:"100%"},children:c.text})})]})},t)},V=function(){var e=Object(i.c)((function(e){return e.user})),t=Object(i.c)((function(e){return e.bloques})).filter((function(t){return t.roles.map((function(e){return e.id})).includes(e.rolId)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"volunteer_content_div",children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary m-5 title",children:Object(p.jsx)("strong",{children:"Bloques m\xednimos"})}),Object(p.jsx)("div",{className:"content_div",children:Object(p.jsx)("div",{className:"single_content_div",children:t.map((function(e){return e.minimo&&Object(p.jsx)(L,{bloque:e,title:e.titulo,button:{text:"Ver m\xf3dulos",styles:"button-style light-blue fs-4"},url:"mis-bloques/".concat(e.id)},e.id)}))})}),Object(p.jsx)("h1",{className:"fs-3 text-secondary m-5 title",children:Object(p.jsx)("strong",{children:"Bloques opcionales"})}),Object(p.jsx)("div",{className:"content_div",children:Object(p.jsx)("div",{className:"single_content_div",children:t.map((function(e){return!e.minimo&&Object(p.jsx)(L,{bloque:e,title:e.titulo,button:{text:"Ver m\xf3dulos",styles:"button-style light-blue fs-4"},url:"mis-bloques/".concat(e.id)},e.id)}))})})]})})})},Y=(n(202),n(170)),Z=n.n(Y);function W(e){var t=e.setChecks,n=Object(c.useState)([]),r=Object(w.a)(n,2),a=r[0],s=r[1],i=Object(b.i)().id;Object(c.useEffect)((function(){m.a.get("/api/unidades/bloque/".concat(i)).then((function(e){return e.data})).then((function(e){return s(e)}))}),[i]);var o=function(e){var n=e.target.checked;localStorage.setItem(e.target.id,n?"true":"false"),t()},l=function(e){localStorage.setItem(e.target.id,"true"),t()};return Object(p.jsx)("div",{children:a.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("a",{href:"".concat(e.link),target:"_blank",rel:"noreferrer",className:"modul_button",children:Object(p.jsx)("button",{className:"my-3 p-3 fs-4 button-style light-blue",id:"unidad".concat(e.id),onClick:l,children:e.titulo})}),Object(p.jsx)(Z.a,{disabled:"true"!==localStorage.getItem("unidad".concat(e.id)),defaultChecked:"true"===localStorage.getItem("check".concat(e.id)),onChange:o,id:"check".concat(e.id),children:"Completado"})]},"unidad-".concat(e.id))}))})}var z,K=function(){var e=Object(c.useState)(""),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(w.a)(a,2),o=s[0],l=s[1],u=Object(c.useState)(!1),d=Object(w.a)(u,2),j=d[0],f=d[1],h=Object(c.useState)({}),O=Object(w.a)(h,2),x=O[0],v=O[1],g=Object(b.i)().id,y=Object(i.c)((function(e){return e.user})),N=Object(b.g)();Object(c.useEffect)((function(){var e=[];m.a.get("/api/bloques/".concat(g)).then((function(e){return e.data})).then((function(t){for(var n=0;n<t.unidades.length;n++){var c,r="true"===localStorage.getItem("check".concat(null===(c=t.unidades[n])||void 0===c?void 0:c.id));!0===r&&e.push(r)}var a=e.length!==t.unidades.length;f(a),v(t)}))}),[o,g]);return Object(p.jsxs)("div",{className:"moduls-div",children:[Object(p.jsx)("h1",{className:"p-5 title",children:Object(p.jsx)("strong",{children:x.titulo})}),Object(p.jsx)("p",{className:"fs-5 descripcion",children:x.descripcion}),Object(p.jsx)("p",{className:"fs-4 modulos",children:Object(p.jsx)("strong",{children:"M\xf3dulos"})}),Object(p.jsx)("div",{className:"unidades",children:Object(p.jsx)(W,{setChecks:function(){return l(o+1)}})}),Object(p.jsx)("p",{className:"fs-4 pregunta",children:Object(p.jsxs)("strong",{children:["Preguntas del bloque: ",Object(p.jsx)("br",{})," ",x.pregunta," "]})}),Object(p.jsx)("textarea",{className:"form-control",name:"contenido",onChange:function(e){r(e.target.value)}}),Object(p.jsx)("button",{disabled:j,onClick:function(){m.a.post("/api/entregas",{contenido:n,bloqueId:g,userId:y.id}).then((function(){return N.push("/mis-entregas")}))},className:"my-3 p-3 fs-4 button-style green",children:"Entregar"})]})},J=n(52),Q=n.n(J),X=n(75),H=Object(l.c)("SET-USERS",(function(){return m.a.get("/api/users/").then((function(e){return e.data}))})),_=Object(l.c)("UPDATE_PASSWORD",(function(e){var t=e.id,n=e.oldP,c=e.newP;return m.a.put("/api/users/updatePass/".concat(t),{oldP:n,newP:c}).then((function(e){return e.data}))})),$=Object(l.d)([],(z={},Object(o.a)(z,H.fulfilled,(function(e,t){return t.payload})),Object(o.a)(z,_.fulfilled,(function(e,t){return t.payload})),Object(o.a)(z,_.rejected,(function(e,t){return t.payload})),z)),ee=n(546),te=n(548);n(454);function ne(e,t){var n=Object(b.g)();!e.full_name||null!==e.rolId&&e.rolId===t||n.push("/unauthorized")}function ce(e){return!/[~`!@#$%^&*+=\-[\]\\';,/{}|\\":<>?()._]/g.test(e)}var re=function(){var e=Object(c.useState)({password:"",newPassword:"",newPasswordConfirm:""}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.b)(),s=Object(i.c)((function(e){return e.user}));ne(s,2);var l=function(e){var t=e.target,c=t.id,a=t.value;r(Object(S.a)(Object(S.a)({},n),{},Object(o.a)({},c,a)))},u=function(){var e=Object(X.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newPassword!==n.newPasswordConfirm){e.next=5;break}if(ce(n.newPassword)){e.next=3;break}return e.abrupt("return",E.b.error("No se permiten caracteres especiales"));case 3:return e.next=5,a(_({id:s.id,oldP:n.password,newP:n.newPassword})).then((function(e){e.payload?E.b.success("Password changed"):E.b.error("Bad credentials")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"change_password_div",children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary m-5",children:Object(p.jsx)("strong",{children:"Cambiar contrase\xf1a"})}),Object(p.jsxs)(ee.a,{initialValues:{remember:!0},onFinish:u,children:[Object(p.jsx)(ee.a.Item,{onChange:l,label:"Actual contrase\xf1a:",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(p.jsx)(te.a.Password,{})}),Object(p.jsx)(ee.a.Item,{onChange:l,label:"Nueva contrase\xf1a:",name:"newPassword",rules:[{required:!0,message:"Please input your password!"}],children:Object(p.jsx)(te.a.Password,{})}),Object(p.jsx)(ee.a.Item,{onChange:l,label:"Confirm\xe1 la nueva contrase\xf1a",name:"newPasswordConfirm",rules:[{required:!0,message:"Please input your password!"}],children:Object(p.jsx)(te.a.Password,{})}),Object(p.jsx)("button",{type:"submit",className:"button-style green button-style-form my-3 p-2 fs-4",children:"Cambiar"})]})]})})};n(241);function ae(){var e=Object(i.c)((function(e){return e.sedes}));return ne(Object(i.c)((function(e){return e.user})),1),Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"wh-100 row justify-content-center align-items-center m-5 p-5",children:e.map((function(e){return Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)(f.b,{to:"/admin-usuarios/sede/".concat(e.id),children:Object(p.jsxs)("button",{className:"m-3 p-4 fs-5 button-style light-blue",type:"button",children:[e.nombre," ",Object(p.jsx)("i",{className:"bi bi-pencil-square"})]})})},e.id)}))})})}var se=function(){var e=Object(b.g)(),t=Object(i.c)((function(e){return e.user}));return ne(t,1),t.rolId&&1!==t.rolId?(e.push("/unauthorized"),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("h1",{children:"No autorizado"})})):Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary",children:Object(p.jsx)("strong",{children:"Acced\xe9 a una sede para ver sus voluntarios y gestores"})}),Object(p.jsx)(ae,{})]})},ie=function(){return Object(p.jsx)("h1",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:"NO AUTORIZADO"})},oe=n(10),le=function(e){var t=e.id,n=e.button,c=e.icon,r=e.setState,a=e.stateIcon;return Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("div",{className:"card position-relative",children:Object(p.jsxs)("div",{className:" ".concat(n.styles," p-3 text-center"),style:{width:"100%"},children:[n.text,c&&c.length?Object(p.jsx)("div",{children:a.key&&a.key.length&&a.key===t?Object(p.jsx)("i",{className:a.style,onClick:function(){return r(t)}}):Object(p.jsx)("i",{className:c,onClick:function(){return r(t)}})}):""]})})},t)},ue=(n(522),function(){var e=Object(i.b)(),t=Object(b.g)(),n=Object(i.c)((function(e){return e.user})),r=Object(i.c)((function(e){return e.sedes})),a=Object(c.useState)({}),s=Object(w.a)(a,2),l=s[0],d=s[1],j=Object(c.useState)([]),f=Object(w.a)(j,2),h=f[0],O=f[1],x=Object(c.useState)(""),v=Object(w.a)(x,2),g=v[0],y=v[1],N=Object(c.useState)({key:"",style:"btn bi bi-check-circle-fill check-style"}),I=Object(w.a)(N,2),k=I[0],C=I[1];Object(c.useEffect)((function(){h.length||O(Object(oe.a)(r)),C((function(e){return Object(S.a)(Object(S.a)({},e),{},{key:g})}))}),[l,g,h,r]);return Object(p.jsxs)("div",{className:"div-sedes",children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary p-5",children:Object(p.jsx)("strong",{children:"Eleg\xed tu sede"})}),Object(p.jsx)("div",{className:"justify-content-center align-items-center",children:Object(p.jsxs)("form",{className:"d-flex col-auto text-center",onChange:function(e){var t=e.target;d(Object(S.a)(Object(S.a)({},l),{},Object(o.a)({},t.name,t.value)))},onSubmit:function(e){e.preventDefault(),l.search&&l.search.length?O(r.filter((function(e){return e.nombre.toLowerCase().indexOf(l.search.toLowerCase())>=0}))):(O(r),C(Object(S.a)(Object(S.a)({},k),{},{key:""})))},children:[Object(p.jsx)("input",{type:"text",name:"search",className:"form-control me-2 fs-4",placeholder:"Buscar sede"}),Object(p.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:Object(p.jsx)("i",{className:"bi bi-search"})})]})}),Object(p.jsx)("div",{className:"sedes mt-5",children:null===h||void 0===h?void 0:h.map((function(e,t){return Object(p.jsx)(le,{id:"".concat(e.id),button:{text:"".concat(e.nombre),styles:"button-style  light-blue fs-5"},icon:"btn bi bi-circle-fill uncheck-style",setState:y,stateIcon:k},"".concat(e.id))}))}),Object(p.jsx)("div",{className:" guardarButton ",children:Object(p.jsx)("button",{className:"my-4 p-3 fs-4 button-style green",onClick:function(){m.a.put("/api/users/".concat(n.id),{sedeId:g}).then((function(e){return e.data})).then((function(n){e(u(n)),t.push("/user")})).catch((function(e){return e}))},children:"Guardar"})})]})}),de=n(51),be=n.n(de),je=n(124),me=je.a.Option;var fe=function(){var e=Object(c.useState)(0),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(w.a)(a,2),o=s[0],l=s[1],u=Object(i.c)((function(e){return e.user})),d=Object(i.c)((function(e){return e.roles.filter((function(e){return 1!==e.id}))})),j=Object(b.h)().pathname.slice(21);Object(c.useEffect)((function(){m.a.get("/api/users/sede/".concat(j)).then((function(e){return e.data})).then((function(e){return l(e)}))}),[u,j]);var f=function(e){r(e)},h=function(e,t){m.a.post("/api/roles/set/",{userId:e,rolId:t,user:u}).then((function(){return m.a.get("/api/users/sede/".concat(j))})).then((function(e){return e.data})).then((function(e){return l(e)}))},O=be.a.mixin({buttonsStyling:!0});return ne(u,1),Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary",children:Object(p.jsx)("strong",{children:"Administrar roles"})}),!o.length&&Object(p.jsx)("h1",{className:"fs-4",children:"No hay voluntarios/gestores en esta sede"}),Object(p.jsx)("br",{}),o&&o.map((function(e){return Object(p.jsxs)("div",{className:"divAdminUser",children:[Object(p.jsxs)("p",{className:"fs-6",children:["Nombre: ","  ",Object(p.jsx)("strong",{children:e.full_name})]}),Object(p.jsxs)("p",{className:"fs-6",children:["Rol: ","  ",Object(p.jsx)("strong",{children:e.rol&&e.rol.tipo})]}),Object(p.jsx)(je.a,{style:{width:200},placeholder:"Seleccionar rol",onChange:f,children:d&&d.map((function(e){return Object(p.jsxs)(me,{label:"children",value:e.id,children:[" ",e.tipo," "]},e.id)}))}),Object(p.jsx)("button",{className:"btn btn-outline-primary mx-1",onClick:function(){return h(e.id,parseInt(n))},type:"button",children:"Asignar"}),Object(p.jsx)("button",{className:"btn btn-outline-danger mx-1",onClick:function(){return t=e.id,void O.fire({title:"Est\xe1s seguro?",text:"Si lo confirmas, no podr\xe1s deshacerlo!",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, borrar!",cancelButtonText:"No, cancelar!",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then((function(e){e.isConfirmed?(O.fire("Eliminado!","El usuario fue eliminado correctamente.","success"),m.a.delete("/api/users/".concat(t)).then((function(){return m.a.get("/api/users/sede/".concat(j)).then((function(e){return e.data})).then((function(e){return l(e)}))})),E.b.success("Usuario eliminado correctamente")):e.dismiss===be.a.DismissReason.cancel&&O.fire("Cancelado","El usuario est\xe1 a salvo","error")}));var t},type:"button",children:"Eliminar usuario"})]},e.id)}))]})},he=n(545),Oe=je.a.Option;var xe=function(){var e=Object(c.useState)(0),t=Object(w.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),o=Object(w.a)(s,2),l=o[0],u=o[1],d=Object(i.c)((function(e){return e.user})),b=Object(i.c)((function(e){return e.roles.filter((function(e){return e.id>2}))}));Object(c.useEffect)((function(){m.a.get("/api/users/sede/".concat(d.sedeId)).then((function(e){return e.data})).then((function(e){return u(e.filter((function(e){return e.id!==d.id})))}))}),[d]);var j=function(e){a(e)};ne(d,2);var f=l.map((function(e){var t;return{key:e.id,nombre:e.full_name,rol:null===(t=e.rol)||void 0===t?void 0:t.tipo}})),h=[{title:"Voluntario",render:function(e){return Object(p.jsxs)(r.a.Fragment,{children:[e.nombre,Object(p.jsx)("hr",{}),e.rol]})},responsive:["xs"]},{title:"Nombre",dataIndex:"nombre",key:"nombre",responsive:["sm"]},{title:"Rol",dataIndex:"rol",key:"rol",responsive:["sm"]},{title:"Seleccionar rol",key:"seleccionar rol",render:function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)(je.a,{defaultValue:"Seleccionar rol",style:{width:200},onChange:j,children:b&&b.map((function(e){return Object(p.jsxs)(Oe,{value:e.id,children:[" ",e.tipo," "]},e.id)}))}),Object(p.jsx)("button",{onClick:function(e){return c=t.key,r=parseInt(n),void m.a.post("http://localhost:3001/api/roles/set/",{userId:c,rolId:r,user:d}).then((function(){m.a.get("/api/users/sede/".concat(d.sedeId)).then((function(e){return e.data})).then((function(e){return u(e.filter((function(e){return e.id!==d.id})))}))}));var c,r},className:"btn btn-outline-primary mx-1",children:"Asignar rol"})]})}}];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary p-5 text-center",children:Object(p.jsx)("strong",{children:"Administrar roles"})}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{dataSource:f,columns:h,pagination:!1})})]})},pe=Object(l.c)("GET_SEDES",(function(){return m.a.get("/api/sedes/").then((function(e){return e.data}))})),ve=Object(l.d)([],Object(o.a)({},pe.fulfilled,(function(e,t){return t.payload})));n(242);function ge(){var e=Object(c.useState)({}),t=Object(w.a)(e,2),n=t[0],a=t[1],s=Object(i.c)((function(e){return e.sedes})),l=Object(i.b)(),u=Object(i.c)((function(e){return e.user})),d=function(e){a(Object(S.a)(Object(S.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},b=be.a.mixin({buttonsStyling:!0});ne(u,1);var j=s.map((function(e){return{key:e.id,nombre:e.nombre,comunidadId:e.comunidadId}})),f=[{title:"Sede",render:function(e){return Object(p.jsxs)(r.a.Fragment,{children:[e.nombre,Object(p.jsx)("hr",{}),e.comunidadId]})},responsive:["xs"]},{title:"Sede",dataIndex:"nombre",key:"nombre",responsive:["sm"]},{title:"Comunidad ID",dataIndex:"comunidadId",key:"comunidadId",responsive:["sm"]},{title:"Modificar/eliminar",key:"modificar/eliminar",render:function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return e=t.key,void b.fire({title:"Est\xe1s seguro?",text:"Si lo confirmas, no podr\xe1s deshacerlo!",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, borrar!",cancelButtonText:"No, cancelar!",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then((function(t){t.isConfirmed?(b.fire("Eliminado!","La sede fue eliminada correctamente.","success"),m.a.delete("/api/sedes/".concat(e)).then((function(){return l(pe())})),E.b.success("Sede eliminada correctamente")):t.dismiss===be.a.DismissReason.cancel&&b.fire("Cancelado","La sede est\xe1 a salvo","error")}));var e},className:"btn btn-outline-danger mx-1",children:"Eliminar"}),Object(p.jsx)("button",{onClick:function(){return e="sedeForm".concat(t.key),void(document.getElementById(e).style.display="block"===document.getElementById(e).style.display?"none":"block");var e},className:"btn btn-outline-primary mx-1",children:"Modificar"}),Object(p.jsxs)("form",{className:"sedesForm",onSubmit:function(e){return function(e,t){if(e.preventDefault(),!ce(n.nombre))return E.b.error("No se permiten caracteres especiales");m.a.post("/api/sedes/".concat(t),n).then((function(e){return e.data})).then((function(){return l(pe())}))}(e,t.key)},id:"sedeForm".concat(t.key),style:{display:"none"},children:[Object(p.jsx)("label",{htmlFor:"nombre",children:"Nombre"}),Object(p.jsx)("input",{onChange:d,type:"text",name:"nombre",placeholder:t.nombre,className:"form-control"}),Object(p.jsx)("label",{htmlFor:"comunidadId",children:"Comunidad ID"}),Object(p.jsx)("input",{onChange:d,type:"number",name:"comunidadId",placeholder:t.comunidadId,className:"form-control"}),Object(p.jsx)("button",{className:"btn btn-success mx-1",type:"submit",children:"Confirmar cambios"})]})]})}}];return Object(p.jsx)("div",{children:Object(p.jsx)(he.a,{bordered:!0,dataSource:j,columns:f,pagination:!1})})}var ye=n(547);function Ne(){var e=Object(c.useState)({}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.b)(),s=Object(i.c)((function(e){return e.user}));return ne(s,1),Object(p.jsxs)("div",{className:"wh-100 text-center p-5 justify-content-center align-items-center",children:[Object(p.jsxs)("div",{className:"col-auto",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary text-center",children:Object(p.jsx)("strong",{children:"Gestionar sedes"})}),Object(p.jsx)("button",{type:"button",onClick:function(){document.getElementById("newSede").style.display="block"===document.getElementById("newSede").style.display?"none":"block"},className:"my-5 p-3 fs-4 button-style green",children:"Crear nueva sede"})]}),Object(p.jsx)("div",{className:"createSede",children:Object(p.jsxs)(ee.a,{style:{display:"none"},name:"newSede",labelCol:{span:8},wrapperCol:{span:8},initialValues:{remember:!0},onValuesChange:function(e,t){return function(e,t){r(t)}(0,t)},onFinish:function(){if(!ce(n.nombre))return E.b.error("No se permiten caracteres especiales");m.a.post("/api/sedes/",n).then((function(e){e.data&&E.b.success("Sede creada correctamente")})).then((function(){a(pe())})).catch((function(e){return E.b.warning("No se pudo crear la sede")}))},children:[Object(p.jsx)(ee.a.Item,{label:"Comunidad Id",name:"comunidadId",children:Object(p.jsx)(ye.a,{})}),Object(p.jsx)(ee.a.Item,{label:"Nombre",name:"nombre",children:Object(p.jsx)(te.a.TextArea,{})}),Object(p.jsx)(G.a,{style:{display:n.nombre?"block":"none"},htmlType:"submit",type:"submit",children:"Crear sede"})]})}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(ge,{})})]})}var Ie=n(149),ke=Object(l.c)("GET-BLOQUES",(function(){return m.a.get("/api/bloques").then((function(e){return e.data}))})),Ce=Object(l.d)([],Object(o.a)({},ke.fulfilled,(function(e,t){return t.payload})));n(243);function qe(){var e=Object(c.useState)({rolesId:[]}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(w.a)(a,2),l=s[0],u=s[1],d=Object(i.c)((function(e){return e.user})),j=Object(b.g)(),f=Object(i.b)();ne(d,1),Object(c.useEffect)((function(){m.a.get("/api/roles").then((function(e){return e.data})).then((function(e){return e.filter((function(e){return e.id>=3}))})).then((function(e){return u(e)}))}),[]);var h=function(e){r(Object(S.a)(Object(S.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},O=function(e){var t="si"===e.target.id;r(Object(S.a)(Object(S.a)({},n),{},{minimo:t}))},x=function(e){var t=Object(oe.a)(n.rolesId);e.target.checked?t=[].concat(Object(oe.a)(t),[e.target.value]):t.splice(n.rolesId.indexOf(e.target.value),1),r(Object(S.a)(Object(S.a)({},n),{},{rolesId:Object(oe.a)(t)}))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"admin",children:Object(p.jsx)("h1",{className:"fs-2 text-secondary m-5",children:Object(p.jsx)("strong",{children:"Crear nuevo bloque de formaci\xf3n"})})}),Object(p.jsxs)(ee.a,{labelCol:{span:5},wrapperCol:{span:13},onFinish:function(e){if(!ce(n.titulo))return E.b.error("No se permiten caracteres especiales");m.a.post("/api/bloques",n).then((function(e){f(ke()),j.push("/admin-bloques")}))},children:[Object(p.jsx)(ee.a.Item,{className:"admin_input",label:"T\xedtulo",name:"titulo",rules:[{required:!0,message:"Por favor complete el campo"}],children:Object(p.jsx)(te.a,{name:"titulo",onChange:h})}),Object(p.jsx)(ee.a.Item,{className:"admin_input",label:"Descripci\xf3n",name:"descripcion",rules:[{required:!0,message:"Por favor complete el campo"}],children:Object(p.jsx)(te.a,{name:"descripcion",onChange:h})}),Object(p.jsx)(ee.a.Item,{className:"admin_input",label:"Preguntas",name:"pregunta",rules:[{required:!0,message:"Por favor complete el campo"}],children:Object(p.jsx)(te.a.TextArea,{name:"pregunta",onChange:h})}),Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h5",{children:"\xbfEs bloque m\xednimo?"}),Object(p.jsxs)(Ie.a.Group,{children:[Object(p.jsx)(Ie.a.Button,{id:"si",value:"si",onChange:O,children:"Si"}),Object(p.jsx)(Ie.a.Button,{id:"no",value:"no",onChange:O,children:"No"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("h5",{children:"\xbfA qu\xe9 roles est\xe1 destinado?"}),l.map((function(e){return Object(p.jsxs)("div",{value:e.id,children:[Object(p.jsx)("label",{className:"admin_check",htmlFor:e.tipo,children:e.tipo}),Object(p.jsx)("input",{type:"checkbox",name:"roles",value:e.id,id:e.id,onChange:x})]})})),Object(p.jsx)("br",{}),Object(p.jsx)(ee.a.Item,{children:Object(p.jsx)("button",{htmlType:"submit",className:"my-3 p-2 fs-4 button-style green",children:"Crear"})})]})]})]})}function Se(){var e=Object(i.c)((function(e){return e.user}));Object(c.useEffect)((function(){}),[e]);var t=Object(i.c)((function(e){return e.bloques}));return ne(e,1),Object(p.jsxs)("div",{className:"wh-100 m-0 row justify-content-center align-items-center",children:[Object(p.jsxs)("div",{className:"col-auto m-5",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary",children:Object(p.jsx)("strong",{children:"Gestionar o crear bloques"})}),Object(p.jsx)(f.b,{to:"/admin-bloques-crear",children:Object(p.jsx)("button",{type:"button",className:"my-5 p-3 fs-4 button-style green",children:"Crear nuevo bloque"})})]}),Object(p.jsx)("div",{className:"wh-100 my-3 row justify-content-center align-items-center",children:t.map((function(e){return Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)(f.b,{to:"/admin-bloques/".concat(e.id),children:Object(p.jsxs)("button",{type:"button",className:"m-3 p-4 fs-5 button-style light-blue",children:[e.titulo," ",Object(p.jsx)("i",{className:"bi bi-pencil-square"})]})})},e.id)}))})]})}n(531);function we(e){var t=e.forceRender,n=e.bloque,r=Object(i.c)((function(e){return e.user})),a=Object(c.useState)({bloqueId:n.id}),s=Object(w.a)(a,2),l=s[0],u=s[1];ne(r,1);var d=function(e){u(Object(S.a)(Object(S.a)({},l),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"fs-2",children:Object(p.jsxs)("strong",{children:["Agregar unidad a ",null===n||void 0===n?void 0:n.titulo]})}),Object(p.jsxs)(ee.a,{onFinish:function(e){ce(l.titulo)?m.a.post("/api/unidades",l).then((function(){return t()}),E.b.success("Agregado correctamente")):E.b.error("No se permiten caracteres especiales")},children:[Object(p.jsx)(ee.a.Item,{label:"Titulo",name:"titulo",rules:[{required:!0,message:"Por favor complete el campo"}],children:Object(p.jsx)(te.a,{type:"text",onChange:d,name:"titulo"})}),Object(p.jsx)(ee.a.Item,{label:"Link",name:"link",rules:[{required:!0,message:"Por favor complete el campo"}],children:Object(p.jsx)(te.a,{type:"text",onChange:d,name:"link"})}),Object(p.jsx)("div",{className:"admin_unidades",children:Object(p.jsx)("button",{type:"submit",className:"mb-3 mt-3 p-3 fs-4 button-style green",children:"Agregar unidad"})})]})]})}function Ee(e){var t=e.forceRender,n=e.unidades,r=Object(c.useState)({}),a=Object(w.a)(r,2),s=a[0],l=a[1];ne(Object(i.c)((function(e){return e.user})),1);var u=function(e){l(Object(S.a)(Object(S.a)({},s),{},Object(o.a)({},e.target.name,e.target.value)))},d=be.a.mixin({buttonsStyling:!0});return Object(p.jsx)(p.Fragment,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"admin",children:Object(p.jsx)("button",{className:"my-3 p-3 fs-4 button-style light-blue",onClick:function(){return t=e.id,void(document.getElementById("unidad".concat(t)).style.display="none"===document.getElementById("unidad".concat(t)).style.display?"block":"none");var t},type:"button",children:e.titulo})}),Object(p.jsxs)(ee.a,{style:{display:"none"},labelCol:{span:5},wrapperCol:{span:13},onFinish:function(n){return c=e.id,void m.a.put("/api/unidades/".concat(c),s).then((function(){return t()}),E.b.success("Modificado correctamente"));var c},id:"unidad".concat(e.id),children:[Object(p.jsx)(ee.a.Item,{label:"Titulo",children:Object(p.jsx)(te.a,{type:"text",name:"titulo",onChange:u,defaultValue:e.titulo})}),Object(p.jsx)(ee.a.Item,{label:"Link",children:Object(p.jsx)(te.a,{type:"text",name:"link",onChange:u,defaultValue:e.link})}),Object(p.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(p.jsx)("button",{className:"btn btn-outline-danger m-4 px-3 fs-4 ",type:"button",onClick:function(){return n=e.id,void d.fire({title:"Est\xe1s seguro?",text:"Si lo confirmas, no podr\xe1s deshacerlo!",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, borrar!",cancelButtonText:"No, cancelar!",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then((function(e){e.isConfirmed?(d.fire("Eliminado!","El m\xf3dulo fue eliminado correctamente.","success"),m.a.delete("/api/unidades/".concat(n)).then((function(){return t()}))):e.dismiss===be.a.DismissReason.cancel&&d.fire("Cancelado","El m\xf3dulo est\xe1 a salvo","error")}));var n},children:"Eliminar"}),Object(p.jsx)("button",{className:"btn btn-outline-primary m-4 px-3 fs-4",htmlType:"submit",children:"Modificar"})]})]}),Object(p.jsx)("br",{})]},e.id)}))})}function Be(){var e=Object(c.useState)(0),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(w.a)(a,2),l=s[0],u=s[1],d=Object(c.useState)(!1),j=Object(w.a)(d,2),f=j[0],h=j[1],O=Object(c.useState)({bloque:l}),x=Object(w.a)(O,2),v=x[0],g=x[1],y=Object(b.i)().id,N=Object(i.c)((function(e){return e.user})),I=Object(i.c)((function(e){return e.roles})).filter((function(e){return e.id>2})),k=Object(b.g)(),C=Object(i.b)();Object(c.useEffect)((function(){m.a.get("/api/bloques/".concat(y)).then((function(e){return e.data})).then((function(e){return g({titulo:e.titulo,descripcion:e.descripcion,minimo:e.minimo,rolesId:e.roles.map((function(e){return e.id}))}),u(e),e})).then((function(e){for(var t=I.map((function(e){return e.id})),n=0;n<I.length;n++)document.getElementById("rol".concat(t[n])).checked=e.roles.map((function(e){return e.id})).includes(t[n])&&"true";document.getElementById("minimoSi").checked=e.minimo&&"true",document.getElementById("minimoNo").checked=!e.minimo&&"true"}))}),[f,n,N,y]);var q=function(e){g(Object(S.a)(Object(S.a)({},v),{},Object(o.a)({},e.target.name,e.target.value)))},B=function(e){var t="si"===e.target.id;g(Object(S.a)(Object(S.a)({},v),{},{minimo:t}))},A=function(e){var t=Object(oe.a)(v.rolesId);e.target.checked?t=[].concat(Object(oe.a)(t),[e.target.value]):t.splice(v.rolesId.indexOf(e.target.value),1),g(Object(S.a)(Object(S.a)({},v),{},{rolesId:Object(oe.a)(t)}))},P=be.a.mixin({buttonsStyling:!0}),T=function(){r(n+1)};return ne(N,1),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary m-5",children:Object(p.jsx)("strong",{children:l&&l.titulo})}),Object(p.jsx)("br",{})]}),l&&Object(p.jsxs)(ee.a,{labelCol:{span:5},wrapperCol:{span:13},onFinish:function(){m.a.put("/api/bloques/".concat(y),v).then((function(){C(ke())})).then((function(){E.b.success("Modificado correctamente"),k.push("/admin-bloques")}))},children:[Object(p.jsx)(ee.a.Item,{label:"Titulo",children:Object(p.jsx)(te.a,{className:"admin_input",type:"text",name:"titulo",onChange:q,defaultValue:l.titulo})}),Object(p.jsx)(ee.a.Item,{label:"Descripci\xf3n",children:Object(p.jsx)(te.a.TextArea,{defaultValue:l.descripcion,autoSize:!0,name:"descripcion",className:"admin_input",showCount:!0,maxLength:350,onChange:q})}),Object(p.jsx)(ee.a.Item,{label:"Preguntas",children:Object(p.jsx)(te.a.TextArea,{className:"admin_input",onChange:q,name:"pregunta",defaultValue:l.pregunta})}),Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h5",{children:"\xbfEs bloque m\xednimo?"}),Object(p.jsxs)(Ie.a.Group,{children:[Object(p.jsx)(Ie.a.Button,{id:"minimoSi",value:!0,onChange:B,children:"Si"}),Object(p.jsx)(Ie.a.Button,{id:"minimoNo",value:!1,onChange:B,children:"No"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("h5",{children:"\xbfA qu\xe9 roles est\xe1 destinado?"}),I.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"admin_check",htmlFor:e.tipo,children:e.tipo}),Object(p.jsx)("input",{type:"checkbox",name:"roles",value:e.id,id:"rol".concat(e.id),onChange:A})]},e.id)}))]}),Object(p.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(p.jsx)("button",{className:"btn btn-outline-danger m-4 px-3 fs-4",type:"button",onClick:function(){P.fire({title:"Est\xe1s seguro?",text:"Si lo confirmas, no podr\xe1s deshacerlo!",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, borrar!",cancelButtonText:"No, cancelar!",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then((function(e){e.isConfirmed?(P.fire("Eliminado!","El bloque fue eliminado correctamente.","success"),m.a.delete("/api/bloques/".concat(y)).then((function(){C(ke()),k.push("/admin-bloques")}))):e.dismiss===be.a.DismissReason.cancel&&P.fire("Cancelado","El bloque est\xe1 a salvo","error")}))},children:"Eliminar"}),Object(p.jsx)("button",{className:"btn btn-outline-primary m-4 px-3 fs-4",type:"submit",children:"Modificar"})]})]}),Object(p.jsxs)("div",{className:"my-5 d-flex justify-content-center",children:[Object(p.jsx)("button",{className:"mb-3 mt-3 p-3 fs-4 button-style button-style green",type:"button",onClick:function(){h(!f)},style:{display:f?"none":"block"},children:"Agregar unidad al bloque"}),f&&Object(p.jsx)(we,{forceRender:T,bloque:l}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary",children:Object(p.jsx)("strong",{children:"Unidades del bloque"})}),Object(p.jsx)("br",{})]}),Object(p.jsx)(Ee,{forceRender:T,unidades:null===l||void 0===l?void 0:l.unidades})]})}var Ae=Object(l.c)("GET-ROLES",(function(){return m.a.get("/api/roles").then((function(e){return e.data}))})),Pe=Object(l.d)([],Object(o.a)({},Ae.fulfilled,(function(e,t){return t.payload})));n(244);function Te(){var e=Object(c.useState)({}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.c)((function(e){return e.roles})).filter((function(e){return e.id>1})),s=Object(i.b)(),l=Object(i.c)((function(e){return e.user})),u=function(e){r(Object(o.a)({},e.target.name,e.target.value))},d=be.a.mixin({buttonsStyling:!0});ne(l,1);var b=a.map((function(e){return{key:e.id,tipo:e.tipo}})),j=[{title:"Rol",dataIndex:"tipo",key:"tipo"},{title:"Modificar/eliminar",key:"modificar/eliminar",render:function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return e=t.key,void d.fire({title:"Est\xe1s seguro?",text:"Si lo confirmas, no podr\xe1s deshacerlo!",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, borrar!",cancelButtonText:"No, cancelar!",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then((function(t){t.isConfirmed?(d.fire("Eliminado!","El rol fue eliminado correctamente.","success"),m.a.delete("/api/roles/".concat(e)).then((function(){return s(Ae())})),E.b.success("Rol eliminado correctamente")):t.dismiss===be.a.DismissReason.cancel&&d.fire("Cancelado","El rol est\xe1 a salvo","error")}));var e},type:"button",className:"btn btn-outline-danger mx-1",children:"Eliminar"}),Object(p.jsx)("button",{onClick:function(){return e="rolForm".concat(t.key),void(document.getElementById(e).style.display="block"===document.getElementById(e).style.display?"none":"block");var e},className:"btn btn-outline-primary mx-1",children:"Modificar"}),Object(p.jsxs)("form",{className:"rolesForm",onSubmit:function(e){return function(e,t){if(e.preventDefault(),!ce(n.tipo))return E.b.error("No se permiten caracteres especiales");m.a.put("/api/roles/".concat(t),n).then((function(){s(Ae()),E.b.success("Rol modificado correctamente")})).catch((function(){return E.b.error("No se pudo modificar")}))}(e,t.key)},id:"rolForm".concat(t.key),style:{display:"none"},children:[Object(p.jsx)("label",{htmlFor:"rol-type",className:"form-label",children:Object(p.jsx)("strong",{children:"Nombre: "})}),Object(p.jsx)("input",{onChange:u,type:"text",name:"tipo",id:"rol-type",placeholder:t.tipo,className:"form-control"}),Object(p.jsx)("button",{className:"btn btn-success mx-1",type:"submit",children:"Confirmar cambios"})]})]})}}];return Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{bordered:!0,dataSource:b,columns:j,pagination:!1})})}function Fe(){var e=Object(c.useState)({}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.b)(),s=Object(i.c)((function(e){return e.user}));return ne(s,1),Object(p.jsxs)("div",{className:"adminRoles",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary text-center p-5",children:Object(p.jsx)("strong",{children:"Gestionar roles"})}),Object(p.jsx)("button",{type:"button",onClick:function(){document.getElementById("newRole").style.display="block"===document.getElementById("newRole").style.display?"none":"block"},className:"mb-5 p-3 fs-4 button-style green",children:"Crear nuevo rol"}),Object(p.jsx)("div",{className:"createRol",children:Object(p.jsxs)(ee.a,{style:{display:"none"},name:"newRole",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onValuesChange:function(e,t){return function(e,t){r(t)}(0,t)},onFinish:function(){if(!ce(n.tipo))return E.b.error("No se permiten caracteres especiales");m.a.post("/api/roles/",n).then((function(e){e.data&&E.b.success("Rol creado correctamente")})).then((function(){return a(Ae())})).catch((function(e){return E.b.error("Rol no creado")}))},children:[Object(p.jsx)(ee.a.Item,{label:"Tipo de rol",name:"tipo",children:Object(p.jsx)(te.a.TextArea,{})}),Object(p.jsx)(G.a,{style:{display:n.tipo?"block":"none"},htmlType:"submit",type:"submit",children:"Crear rol"})]})}),Object(p.jsx)(Te,{})]})}n(532);function Re(){var e=Object(c.useState)([]),t=Object(w.a)(e,2),n=t[0],a=t[1],s=Object(i.c)((function(e){return e.user}));Object(c.useEffect)((function(){m.a.get("/api/entregas/user/".concat(s.id)).then((function(e){return e.data})).then((function(e){a(e)}))}),[s]);var o=n.map((function(e){return{key:e.id,bloque:e.bloque.titulo,contenido:e.contenido,estado:e.aprobado?Object(p.jsx)("p",{children:"Completado"}):Object(p.jsx)("p",{children:"Pendiente"})}})),l=[{title:"Bloque",render:function(e){return Object(p.jsx)(r.a.Fragment,{children:e.bloque})},responsive:["xs"]},{title:"Estado",render:function(e){return Object(p.jsx)(r.a.Fragment,{children:e.estado})},responsive:["xs"]},{title:"Bloque",dataIndex:"bloque",key:"bloque",width:300,responsive:["sm"]},{title:"Contenido",dataIndex:"contenido",key:"contenido",width:800,responsive:["sm"]},{title:"Estado",dataIndex:"estado",key:"estado",width:150,responsive:["sm"]}];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"volunteer_entregas_div text-center",children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary m-5 ",children:Object(p.jsx)("strong",{children:"Mis entregas"})}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{bordered:!0,dataSource:o,columns:l,pagination:!1,size:"small"})})]}),Object(p.jsx)("p",{className:"entregas",children:"Si quer\xe9s ver el contenido de tu respuesta, entra desde una computadora por favor."})]})})}var Ge=n(105);n(536);function De(){var e,t=Object(c.useState)(),n=Object(w.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(""),l=Object(w.a)(o,2),u=l[0],d=l[1],j=Object(i.c)((function(e){return e.user})),f=Object(b.g)();Object(c.useEffect)((function(){m.a.get("/api/entregas/sede/".concat(j.sedeId)).then((function(e){return e.data})).then((function(e){return s(e)}))}),[j]),ne(j,2);var h=function(e){var t=e.slice(0,10);return"".concat(t.slice(8,10),"/").concat(t.slice(5,7),"/").concat(t.slice(0,4))},O=null===a||void 0===a?void 0:a.map((function(e){return{key:e.id,voluntario:e.user.full_name,bloque:e.bloque.titulo,estado:e.aprobado?"Completado":"Pendiente",fecha:h(e.updatedAt)}})),x=[{title:"Voluntario",render:function(e){return Object(p.jsxs)(r.a.Fragment,{children:[e.voluntario,Object(p.jsx)("hr",{}),e.estado]})},responsive:["xs"]},{title:"Bloque",render:function(e){return Object(p.jsx)(r.a.Fragment,{children:e.bloque})},responsive:["xs"]},{title:"Voluntario",dataIndex:"voluntario",key:"voluntario",responsive:["sm"]},{title:"Bloque",dataIndex:"bloque",key:"bloque",responsive:["sm"]},{title:"Estado",dataIndex:"estado",key:"estado",responsive:["sm"]},{title:"Fecha",dataIndex:"fecha",key:"fecha",responsive:["sm"]},{title:"",key:"ver",render:function(e,t){return Object(p.jsx)(G.a,{type:"button",onClick:function(){return e=t.key,void f.push("/gestor/entregas/".concat(e));var e},children:"Ver mas"})}}];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary p-5 text-center gestor-entregas",children:Object(p.jsx)("strong",{children:"Entregas de voluntarios"})}),Object(p.jsxs)("div",{className:"d-flex justify-content-around my-4 botones",children:[Object(p.jsx)("div",{className:"col-auto",children:O&&Object(p.jsx)("button",{className:"btn btn-success descargar",children:Object(p.jsx)(Ge.CSVLink,{data:O,filename:"entregas-".concat(null===(e=j.sede)||void 0===e?void 0:e.nombre,".csv"),children:Object(p.jsxs)("p",{className:"text-light m-0 fs-5",children:["Descargar ",Object(p.jsx)("i",{class:"bi bi-file-earmark-excel-fill"})]})})})}),Object(p.jsxs)("form",{className:"row g-0",onSubmit:function(e){e.preventDefault(),m.a.post("/api/entregas/user/nombre",{nombre:u,sedeId:j.sedeId}).then((function(e){return e.data})).then((function(e){return s(e)}))},children:[Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("input",{type:"text",name:"nombre",onChange:function(e){d(e.target.value)},className:"form-control fs-5 busqueda",placeholder:"voluntari@s"})}),Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("button",{className:"btn btn-secondary fs-5",type:"submit",children:"Buscar"})})]}),Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsxs)("select",{onChange:function(e){"completadas"===e.target.value&&m.a.get("/api/entregas/completadas/".concat(j.sedeId)).then((function(e){return e.data})).then((function(e){return s(e)})),"pendientes"===e.target.value&&m.a.get("/api/entregas/pendientes/".concat(j.sedeId)).then((function(e){return e.data})).then((function(e){return s(e)})),"todas"===e.target.value&&m.a.get("/api/entregas/sede/".concat(j.sedeId)).then((function(e){return e.data})).then((function(e){return s(e)}))},className:"form-select fs-5",children:[Object(p.jsx)("option",{children:"Filtrar por estado"}),Object(p.jsx)("option",{value:"completadas",children:"Completadas"}),Object(p.jsx)("option",{value:"pendientes",children:"Pendientes"}),Object(p.jsx)("option",{value:"todas",children:"Todas"})]})})]}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{bordered:!0,dataSource:O,columns:x,pagination:!0})})]})}n(537);function Me(){var e=Object(i.c)((function(e){return e.user})),t=Object(c.useState)(),n=Object(w.a)(t,2),r=n[0],a=n[1],s=Object(b.i)().id,o=Object(b.g)();Object(c.useEffect)((function(){m.a.get("/api/entregas/".concat(s)).then((function(e){return e.data})).then((function(e){return a(e)}))}),[s]);return ne(e,2),Object(p.jsx)("div",{className:"wh-100 row justify-content-center align-items-center",children:Object(p.jsxs)("div",{className:"col-auto p-5",children:[Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("img",{src:null===r||void 0===r?void 0:r.user.img,alt:"userIMG"}),Object(p.jsx)("h1",{className:"fs-2 m-2 text-secondary",children:Object(p.jsx)("strong",{children:null===r||void 0===r?void 0:r.user.full_name})})]}),Object(p.jsxs)("div",{className:"m-5",children:[Object(p.jsx)("h2",{className:"fs-4 text-left",children:"Bloque:"})," ",Object(p.jsx)("p",{children:null===r||void 0===r?void 0:r.bloque.titulo}),Object(p.jsx)("h2",{className:"fs-4",children:"Preguntas:"})," ",Object(p.jsx)("p",{children:null===r||void 0===r?void 0:r.bloque.pregunta}),Object(p.jsx)("h2",{className:"fs-4",children:"Respuesta del voluntario:"})," ",Object(p.jsx)("p",{children:null===r||void 0===r?void 0:r.contenido})]}),Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-secondary",onClick:function(e){return function(e){e.preventDefault(),m.a.get("/api/entregas/aprobar/".concat(s)).then((function(){return o.push("/gestor/entregas")})).catch((function(e){return console.log(e)}))}(e)},children:"Marcar como completada"})})]})})}n(538);var Ue=function(e,t){var n=t.filter((function(e){return!0===e.minimo})).filter((function(t){return t.roles.map((function(e){return e.id})).includes(e.rolId)})),c=e.entregas.filter((function(e){return!0===e.bloque.minimo&&!0===e.aprobado}));return"".concat(c.length,"/").concat(n.length)},Le=function(e){return(e.entregas?e.entregas.filter((function(e){return!0===e.bloque.minimo&&!0===e.aprobado})):[]).length},Ve=function(e,t){return t.filter((function(e){return!0===e.minimo})).filter((function(t){return t.roles.map((function(e){return e.id})).includes(e.rolId)})).length},Ye=function(e,t){var n=t.filter((function(e){return!1===e.minimo})).filter((function(t){return t.roles.map((function(e){return e.id})).includes(e.rolId)})),c=e.entregas.filter((function(e){return!1===e.bloque.minimo&&!0===e.aprobado}));return"".concat(c.length,"/").concat(n.length)},Ze=function(e){return(e.entregas?e.entregas.filter((function(e){return!1===e.bloque.minimo&&!0===e.aprobado})):[]).length},We=function(e,t){return t.filter((function(e){return!1===e.minimo})).filter((function(t){return t.roles.map((function(e){return e.id})).includes(e.rolId)})).length},ze=function(e){return e.entregas.filter((function(e){return!1===e.aprobado})).length},Ke=function(e){return e.map((function(e){return e.entregas.map((function(e){return e.aprobado}))})).flat().filter((function(e){return!1===e})).length},Je=function(e,t){for(var n=t.filter((function(e){return!0===e.minimo})),c=0,r=0,a=function(t){var a=n.filter((function(n){return n.roles.map((function(e){return e.id})).includes(e[t].rolId)})).length;c+=a,r+=e[t].entregas.filter((function(e){return!0===e.bloque.minimo&&!0===e.aprobado})).length},s=0;s<e.length;s++)a(s);return"".concat(r,"/").concat(c)},Qe=function(e,t){for(var n=t.filter((function(e){return!1===e.minimo})),c=0,r=0,a=function(t){var a=n.filter((function(n){return n.roles.map((function(e){return e.id})).includes(e[t].rolId)})).length;c+=a,r+=e[t].entregas.filter((function(e){return!1===e.bloque.minimo&&!0===e.aprobado})).length},s=0;s<e.length;s++)a(s);return"".concat(r,"/").concat(c)};n(539);function Xe(){var e,t,n=Object(i.c)((function(e){return e.user})),a=Object(i.c)((function(e){return e.bloques})),s=Object(c.useState)([]),o=Object(w.a)(s,2),l=o[0],u=o[1];Object(c.useEffect)((function(){m.a.get("/api/users/sede/".concat(n.sedeId)).then((function(e){return e.data})).then((function(e){return u(e.filter((function(e){return e.rolId>2})))})).catch((function(e){return e}))}),[n,a]),ne(n,2);var d=l.map((function(e){return{key:e.id,total:"",voluntario:e.full_name,bloquesMinimos:Ue(e,a),bloquesOpcionales:Ye(e,a),entregasPendientes:ze(e)}})),b=[{title:"Entregas pendientes por voluntario",render:function(e){return Object(p.jsxs)(r.a.Fragment,{children:[e.voluntario,Object(p.jsx)("br",{}),e.entregasPendientes]})},responsive:["xs"]},{title:"",dataIndex:"total",key:"total",responsive:["xs"]},{title:"",dataIndex:"total",key:"total",responsive:["sm"]},{title:"Voluntario",dataIndex:"voluntario",key:"voluntario",responsive:["sm"]},{title:"Bloques m\xednimos completados",dataIndex:"bloquesMinimos",key:"bloquesMinimos",responsive:["sm"]},{title:"Bloques opcionales completados",dataIndex:"bloquesOpcionales",key:"bloquesOpcionales",responsive:["sm"]},{title:"Entregas pendientes",dataIndex:"entregasPendientes",key:"entregasPendientes",responsive:["sm"]}],j=[].concat(Object(oe.a)(d),[{key:"total",total:"Total",voluntario:l.length,bloquesMinimos:Je(l,a),bloquesOpcionales:Qe(l,a),entregasPendientes:Ke(l)}]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"dashboard",children:[Object(p.jsx)("h1",{className:"fs-3 text-secondary p-5 text-center",children:Object(p.jsxs)("strong",{children:["Dashboard de ",null===(e=n.sede)||void 0===e?void 0:e.nombre]})}),Object(p.jsx)("div",{className:"d-flex justify-content-center",children:j&&Object(p.jsx)("button",{className:"btn btn-success my-3 fs-5",children:Object(p.jsx)(Ge.CSVLink,{data:j,filename:"dashboard-".concat(null===(t=n.sede)||void 0===t?void 0:t.nombre,".csv"),children:Object(p.jsxs)("p",{className:"text-light m-0",children:["Descargar ",Object(p.jsx)("i",{class:"bi bi-file-earmark-excel-fill"})]})})})}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{bordered:!0,columns:b,dataSource:j,pagination:!0})})]})})}n(540);function He(){var e=Object(c.useState)({rolId:2}),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.c)((function(e){return e.user})),s=Object(i.c)((function(e){return e.sedes})),l=Object(b.g)();Object(c.useEffect)((function(){for(var e="<option selected>Seleccionar Sede</sede>",t=0;t<s.length;t++){var n,c;e+="<option value=".concat(null===(n=s[t])||void 0===n?void 0:n.id,">").concat(null===(c=s[t])||void 0===c?void 0:c.nombre,"</option>")}document.getElementById("sedes").innerHTML=e}),[s,a]),ne(a,1);var u=function(e){r(Object(S.a)(Object(S.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(p.jsxs)("div",{className:"justify-content-center align-items-center text-center py-5",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary",children:Object(p.jsx)("strong",{children:"Crear Gestor"})}),Object(p.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),n.confirmPassword===n.password){if(!ce(n.password)||!ce(n.full_name))return E.b.error("No se permiten caracteres especiales");m.a.post("/api/users/create",n).then((function(e){e.data&&E.b.success("Gestor creado correctamente")})).then((function(){l.push("/admin-usuarios")})).catch((function(e){return E.b.warning("Mail ya existente")}))}else E.b.warning("Las constrase\xf1as no coinciden")},id:"formGestor",className:"col col-xl-4 my-5",children:[Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{required:!0,type:"text",onChange:u,name:"full_name",placeholder:"Nombre Completo",className:"form-control"})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{required:!0,type:"text",onChange:u,name:"email",placeholder:"Email",className:"form-control"})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{required:!0,type:"password",onChange:u,name:"password",placeholder:"Contrase\xf1a de acceso",className:"form-control"})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("input",{required:!0,type:"password",onChange:u,name:"confirmPassword",placeholder:"Confirme la contrase\xf1a",className:"form-control"})}),Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)("select",{required:!0,id:"sedes",type:"text",onChange:u,name:"sedeId",placeholder:"Sede",className:"form-select"})}),Object(p.jsx)("button",{type:"submit",className:"button-style green button-style-form my-3 p-2 fs-4",children:"Crear"})]})]})}n(541);function _e(){var e=Object(i.c)((function(e){return e.user})),t=Object(i.c)((function(e){return e.sedes})),n=Object(i.c)((function(e){return e.users})),a=Object(i.c)((function(e){return e.bloques})),s=Object(c.useState)([]),o=Object(w.a)(s,2),l=o[0],u=o[1];ne(e,1),Object(c.useEffect)((function(){m.a.get("/api/users/entregas").then((function(e){return e.data})).then((function(e){return u(e.filter((function(e){return e.rolId>2})))})).catch((function(e){return e}))}),[e,a]);var d=[{title:"Sede",render:function(e){return Object(p.jsx)(r.a.Fragment,{children:e.sede})},responsive:["xs"]},{title:"",dataIndex:"total",key:"total",responsive:["sm"]},{title:"Sede",dataIndex:"sede",key:"sede",responsive:["sm"]},{title:"Voluntarios",dataIndex:"voluntarios",key:"voluntarios",responsive:["sm"]},{title:"Gestores",dataIndex:"gestores",key:"gestores",responsive:["sm"]},{title:"Bloques m\xednimos completados",dataIndex:"minimos",key:"minimos"},{title:"Bloques opcionales completados",dataIndex:"opcionales",key:"opcionales"}];ne(e,1),Object(c.useEffect)((function(){m.a.get("/api/users/entregas").then((function(e){return e.data})).then((function(e){return u(e.filter((function(e){return e.rolId>2})))})).catch((function(e){return e}))}),[e,a]);var b=t.map((function(e){var t=n.filter((function(t){return t.sedeId===e.id})),c=0,r=0,s=0,i=0,o=l.filter((function(t){return t.sedeId===e.id}));return o.forEach((function(e){return c+=Le(e)})),o.forEach((function(e){return s+=Ze(e)})),o.forEach((function(e){return r+=Ve(e,a)})),o.forEach((function(e){return i+=We(e,a)})),{key:e.id,total:"",sede:e.nombre,voluntarios:t.filter((function(e){return e.rolId>2})).length,gestores:t.filter((function(e){return 2===e.rolId})).length,minimos:"".concat(c,"/").concat(r),opcionales:"".concat(s,"/").concat(i)}})),j=[].concat(Object(oe.a)(b),[{key:"total",total:"Total",sede:t.length,voluntarios:n.filter((function(e){return e.rolId>2})).length,gestores:n.filter((function(e){return 2===e.rolId})).length,minimos:"".concat(function(){var e=0;return l.forEach((function(t){return e+=Le(t)})),e}(),"/").concat(function(){var e=0;return l.forEach((function(t){return e+=Ve(t,a)})),e}()),opcionales:"".concat(function(){var e=0;return l.forEach((function(t){return e+=Ze(t)})),e}(),"/").concat(function(){var e=0;return l.forEach((function(t){return e+=We(t,a)})),e}())}]);return Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("h1",{className:"fs-2 text-secondary p-5",children:Object(p.jsx)("strong",{children:"Dashboard Nacional"})}),Object(p.jsx)("div",{className:"d-flex justify-content-center",children:j&&Object(p.jsx)("button",{className:"btn btn-success my-3 fs-5",children:Object(p.jsx)(Ge.CSVLink,{data:j,filename:"dashboard-nacional.csv",children:Object(p.jsxs)("p",{className:"text-light m-0",children:["Descargar ",Object(p.jsx)("i",{className:"bi bi-file-earmark-excel-fill"})]})})})}),Object(p.jsx)("div",{className:"table",children:Object(p.jsx)(he.a,{bordered:!0,dataSource:j,columns:d,pagination:!1})})]})}var $e=function(){return Object(p.jsx)("div",{className:"content",children:Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/sede",component:ue}),Object(p.jsx)(b.b,{exact:!0,path:"/user",component:M}),Object(p.jsx)(b.b,{path:"/mis-bloques/:id",component:K}),Object(p.jsx)(b.b,{exact:!0,path:"/mis-bloques",component:V}),Object(p.jsx)(b.b,{path:"/mis-entregas",component:Re}),Object(p.jsx)(b.b,{path:"/gestor/voluntarios",component:xe}),Object(p.jsx)(b.b,{exact:!0,path:"/gestor/entregas",component:De}),Object(p.jsx)(b.b,{path:"/gestor/dashboard",component:Xe}),Object(p.jsx)(b.b,{exact:!0,path:"/gestor/entregas/:id",component:Me}),Object(p.jsx)(b.b,{path:"/gestor-password",component:re}),Object(p.jsx)(b.b,{exact:!0,path:"/admin-bloques",component:Se}),Object(p.jsx)(b.b,{path:"/admin-bloques-crear",component:qe}),Object(p.jsx)(b.b,{path:"/admin-bloques/:id",component:Be}),Object(p.jsx)(b.b,{exact:!0,path:"/admin/dashboard",component:_e}),Object(p.jsx)(b.b,{exact:!0,path:"/admin-usuarios",component:se}),Object(p.jsx)(b.b,{exact:!0,path:"/admin-sedes",component:Ne}),Object(p.jsx)(b.b,{exact:!0,path:"/admin-roles",component:Fe}),Object(p.jsx)(b.b,{path:"/admin-usuarios/sede/:id",component:fe}),Object(p.jsx)(b.b,{path:"/admin-crear-gestor",component:He}),Object(p.jsx)(b.b,{path:"/unauthorized",component:ie}),Object(p.jsx)(b.a,{from:"*",to:"/user"})]})})};n(542);var et=function(){var e=Object(i.b)(),t=Object(b.h)(),n=Object(b.g)();return Object(c.useEffect)((function(){e(H()).then((function(){return e(ke())})).then((function(){return e(pe())})).then((function(){return e(Ae())})).then((function(){return e(ke())})),m.a.get("/api/users/me").then((function(e){return e.data})).then((function(e){return m.a.get("/api/users/".concat(e.id))})).then((function(e){return e.data})).then((function(t){return e(u(t))})).catch((function(e){"/adminlogin"!==t.pathname&&n.push("/")}))}),[e,n,t.pathname]),Object(p.jsxs)("div",{className:"App",children:["/"!==t.pathname&&"/adminlogin"!==t.pathname&&Object(p.jsx)(y,{}),"/"!==t.pathname&&"/adminlogin"!==t.pathname&&Object(p.jsx)(I,{}),Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{exact:!0,path:"/",component:F}),Object(p.jsx)(b.b,{exact:!0,path:"/adminlogin",component:F}),Object(p.jsx)(b.b,{component:$e})]})]})},tt=Object(l.c)("GET-MODULOS",(function(){return m.a.get("/api/unidades").then((function(e){return e.data}))})),nt=Object(l.d)([],Object(o.a)({},tt.fulfilled,(function(e,t){return t.payload}))),ct=Object(l.a)({reducer:{user:d,users:$,sedes:ve,roles:Pe,bloques:Ce,unidades:nt}});s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(i.a,{store:ct,children:Object(p.jsx)(f.a,{children:Object(p.jsx)(et,{})})})}),document.getElementById("root"))}},[[543,1,2]]]);
//# sourceMappingURL=main.61fc412b.chunk.js.map