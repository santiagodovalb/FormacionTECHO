{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Input,message}from\"antd\";import axios from\"axios\";import Swal from\"sweetalert2\";import useAuthorize from\"../../../utils/authorization\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Unidades(_ref){var forceRender=_ref.forceRender,unidades=_ref.unidades;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var user=useSelector(function(state){return state.user;});useAuthorize(user,1);var handleClick=function handleClick(id){document.getElementById(\"unidad\".concat(id)).style.display=document.getElementById(\"unidad\".concat(id)).style.display===\"none\"?\"block\":\"none\";};var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e,id){axios.put(\"/api/unidades/\".concat(id),form).then(function(){return forceRender();},message.success(\"Modificado correctamente\"));};var alertaEliminar=Swal.mixin({buttonsStyling:true});var handleDelete=function handleDelete(id){alertaEliminar.fire({title:\"Estás seguro?\",text:\"Si lo confirmas, no podrás deshacerlo!\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Si, borrar!\",cancelButtonText:\"No, cancelar!\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",reverseButtons:true}).then(function(result){if(result.isConfirmed){alertaEliminar.fire(\"Eliminado!\",\"El módulo fue eliminado correctamente.\",\"success\");axios.delete(\"/api/unidades/\".concat(id)).then(function(){return forceRender();});}else if(result.dismiss===Swal.DismissReason.cancel){alertaEliminar.fire(\"Cancelado\",\"El módulo está a salvo\",\"error\");}});};return/*#__PURE__*/_jsx(_Fragment,{children:unidades===null||unidades===void 0?void 0:unidades.map(function(unidad){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin\",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-3 p-3 fs-4 button-style light-blue\",onClick:function onClick(){return handleClick(unidad.id);},type:\"button\",children:unidad.titulo})}),/*#__PURE__*/_jsxs(Form,{style:{display:\"none\"},labelCol:{span:5},wrapperCol:{span:13},onFinish:function onFinish(e){return handleSubmit(e,unidad.id);},id:\"unidad\".concat(unidad.id),children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Titulo\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"titulo\",onChange:handleChange,defaultValue:unidad.titulo})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Link\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"link\",onChange:handleChange,defaultValue:unidad.link})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger m-4 px-3 fs-4 \",type:\"button\",onClick:function onClick(){return handleDelete(unidad.id);},children:\"Eliminar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary m-4 px-3 fs-4\",htmlType:\"submit\",children:\"Modificar\"})]})]}),/*#__PURE__*/_jsx(\"br\",{})]},unidad.id);})});}","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/client/src/containers/Admin/AdminBloques/Unidades.jsx"],"names":["React","useState","Form","Input","message","axios","Swal","useAuthorize","useSelector","Unidades","forceRender","unidades","form","setForm","user","state","handleClick","id","document","getElementById","style","display","handleChange","e","target","name","value","handleSubmit","put","then","success","alertaEliminar","mixin","buttonsStyling","handleDelete","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","confirmButtonColor","cancelButtonColor","reverseButtons","result","isConfirmed","delete","dismiss","DismissReason","cancel","map","unidad","titulo","span","link"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Input, message } from \"antd\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport { useSelector } from \"react-redux\";\n\nexport default function Unidades({ forceRender, unidades }) {\n  const [form, setForm] = useState({});\n  const user = useSelector((state) => state.user);\n\n  useAuthorize(user, 1);\n\n  const handleClick = (id) => {\n    document.getElementById(`unidad${id}`).style.display =\n      document.getElementById(`unidad${id}`).style.display === \"none\"\n        ? \"block\"\n        : \"none\";\n  };\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e, id) => {\n    axios\n      .put(`/api/unidades/${id}`, form)\n      .then(() => forceRender(), message.success(\"Modificado correctamente\"));\n  };\n\n  const alertaEliminar = Swal.mixin({\n    buttonsStyling: true,\n  });\n\n  const handleDelete = (id) => {\n    alertaEliminar\n      .fire({\n        title: \"Estás seguro?\",\n        text: \"Si lo confirmas, no podrás deshacerlo!\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"Si, borrar!\",\n        cancelButtonText: \"No, cancelar!\",\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        reverseButtons: true,\n      })\n      .then((result) => {\n        if (result.isConfirmed) {\n          alertaEliminar.fire(\n            \"Eliminado!\",\n            \"El módulo fue eliminado correctamente.\",\n            \"success\"\n          );\n          axios.delete(`/api/unidades/${id}`).then(() => forceRender());\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          alertaEliminar.fire(\"Cancelado\", \"El módulo está a salvo\", \"error\");\n        }\n      });\n  };\n\n  return (\n    <>\n      {unidades?.map((unidad) => {\n        return (\n          <div key={unidad.id}>\n            <div className=\"admin\">\n              <button\n                className=\"my-3 p-3 fs-4 button-style light-blue\"\n                onClick={() => handleClick(unidad.id)}\n                type=\"button\"\n              >\n                {unidad.titulo}\n              </button>\n            </div>\n            <Form\n              style={{ display: \"none\" }}\n              labelCol={{\n                span: 5,\n              }}\n              wrapperCol={{\n                span: 13,\n              }}\n              onFinish={(e) => handleSubmit(e, unidad.id)}\n              id={`unidad${unidad.id}`}\n            >\n              <Form.Item label=\"Titulo\">\n                <Input\n                  type=\"text\"\n                  name=\"titulo\"\n                  onChange={handleChange}\n                  defaultValue={unidad.titulo}\n                ></Input>\n              </Form.Item>\n              <Form.Item label=\"Link\">\n                <Input\n                  type=\"text\"\n                  name=\"link\"\n                  onChange={handleChange}\n                  defaultValue={unidad.link}\n                ></Input>\n              </Form.Item>\n              <div className=\"d-flex justify-content-center\">\n                <button\n                  className=\"btn btn-outline-danger m-4 px-3 fs-4 \"\n                  type=\"button\"\n                  onClick={() => handleDelete(unidad.id)}\n                >\n                  Eliminar\n                </button>\n                <button\n                  className=\"btn btn-outline-primary m-4 px-3 fs-4\"\n                  htmlType=\"submit\"\n                >\n                  Modificar\n                </button>\n              </div>\n            </Form>\n            <br />\n          </div>\n        );\n      })}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}