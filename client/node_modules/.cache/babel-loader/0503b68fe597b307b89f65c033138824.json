{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{setUser}from\"../../redux/user\";import axios from\"axios\";import SedeCard from\"./SedeCard\";import\"./Sedes.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Sedes=function Sedes(){var dispatch=useDispatch();var history=useHistory();var user=useSelector(function(state){return state.user;});var sedesPrueba=useSelector(function(state){return state.sedes;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sedes=_useState4[0],setSedes=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectSede=_useState6[0],setSelectSede=_useState6[1];var _useState7=useState({key:\"\",style:\"btn bi bi-check-circle-fill check-style\"}),_useState8=_slicedToArray(_useState7,2),stateIcon=_useState8[0],setStateIcon=_useState8[1];useEffect(function(){if(!sedes.length)setSedes(_toConsumableArray(sedesPrueba));setStateIcon(function(s){return _objectSpread(_objectSpread({},s),{},{key:selectSede});});},[form,selectSede,sedes,sedesPrueba]);var handleChange=function handleChange(e){var target=e.target;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},target.name,target.value)));};var handleSearch=function handleSearch(e){e.preventDefault();if(form.search&&form.search.length)setSedes(sedesPrueba.filter(function(sede){return sede.nombre.toLowerCase().indexOf(form.search.toLowerCase())>=0;}));else{setSedes(sedesPrueba);setStateIcon(_objectSpread(_objectSpread({},stateIcon),{},{key:\"\"}));}};var onSaveSede=function onSaveSede(){axios.put(\"/api/users/\".concat(user.id),{sedeId:selectSede}).then(function(res){return res.data;}).then(function(user){dispatch(setUser(user));history.push(\"/user\");}).catch(function(err){return err;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"div-sedes\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"fs-3 text-secondary p-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Eleg\\xED tu sede\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex col-auto text-center\",onChange:handleChange,onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",className:\"form-control me-2 fs-4\",placeholder:\"Buscar sede\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",type:\"submit\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sedes mt-5\",children:sedes===null||sedes===void 0?void 0:sedes.map(function(sede,index){return/*#__PURE__*/_jsx(SedeCard,{id:\"\".concat(sede.id),button:{text:\"\".concat(sede.nombre),styles:\"button-style  light-blue fs-5\"},icon:\"btn bi bi-circle-fill uncheck-style\",setState:setSelectSede,stateIcon:stateIcon},\"\".concat(sede.id));})}),/*#__PURE__*/_jsx(\"div\",{className:\" guardarButton \",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-4 p-3 fs-4 button-style green\",onClick:onSaveSede,children:\"Guardar\"})})]});};export default Sedes;","map":null,"metadata":{},"sourceType":"module"}