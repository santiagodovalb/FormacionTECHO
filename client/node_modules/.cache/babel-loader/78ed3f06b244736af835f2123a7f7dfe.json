{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Input,message}from\"antd\";import axios from\"axios\";import Swal from\"sweetalert2\";import useAuthorize from\"../../../utils/authorization\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Unidades(_ref){var forceRender=_ref.forceRender,unidades=_ref.unidades;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var user=useSelector(function(state){return state.user;});useAuthorize(user,1);var handleClick=function handleClick(id){document.getElementById(\"unidad\".concat(id)).style.display=document.getElementById(\"unidad\".concat(id)).style.display===\"none\"?\"block\":\"none\";};var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e,id){axios.put(\"/api/unidades/\".concat(id),form).then(function(){return forceRender();},message.success(\"Modificado correctamente\"));};var alertaEliminar=Swal.mixin({buttonsStyling:true});var handleDelete=function handleDelete(id){alertaEliminar.fire({title:\"Estás seguro?\",text:\"Si lo confirmas, no podrás deshacerlo!\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Si, borrar!\",cancelButtonText:\"No, cancelar!\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",reverseButtons:true}).then(function(result){if(result.isConfirmed){alertaEliminar.fire(\"Eliminado!\",\"El módulo fue eliminado correctamente.\",\"success\");axios.delete(\"/api/unidades/\".concat(id)).then(function(){return forceRender();});}else if(result.dismiss===Swal.DismissReason.cancel){alertaEliminar.fire(\"Cancelado\",\"El módulo está a salvo\",\"error\");}});};return/*#__PURE__*/_jsx(_Fragment,{children:unidades===null||unidades===void 0?void 0:unidades.map(function(unidad){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin\",children:/*#__PURE__*/_jsx(\"button\",{className:\"my-3 p-3 fs-4 button-style light-blue\",onClick:function onClick(){return handleClick(unidad.id);},type:\"button\",children:unidad.titulo})}),/*#__PURE__*/_jsxs(Form,{style:{display:\"none\"},labelCol:{span:5},wrapperCol:{span:13},onFinish:function onFinish(e){return handleSubmit(e,unidad.id);},id:\"unidad\".concat(unidad.id),children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Titulo\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"titulo\",onChange:handleChange,defaultValue:unidad.titulo})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Link\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"link\",onChange:handleChange,defaultValue:unidad.link})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger m-4 px-3 fs-4 \",type:\"button\",onClick:function onClick(){return handleDelete(unidad.id);},children:\"Eliminar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary m-4 px-3 fs-4\",htmlType:\"submit\",children:\"Modificar\"})]})]}),/*#__PURE__*/_jsx(\"br\",{})]},unidad.id);})});}","map":null,"metadata":{},"sourceType":"module"}