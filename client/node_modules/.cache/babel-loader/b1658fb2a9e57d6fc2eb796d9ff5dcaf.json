{"ast":null,"code":"import _toConsumableArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState}from\"react\";import{useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Form,Input,Radio,message}from\"antd\";import{getBloques}from\"../../../redux/bloques\";import isValid from\"../../../utils/specialChars\";import useAuthorize from\"../../../utils/authorization\";import\"antd/dist/antd.css\";import\"./AdminBloques.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CrearBloque(){var _useState=useState({rolesId:[]}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var user=useSelector(function(state){return state.user;});var history=useHistory();var dispatch=useDispatch();useAuthorize(user,1);useEffect(function(){axios.get(\"/api/roles\").then(function(res){return res.data;}).then(function(roles){return roles.filter(function(rol){return rol.id>=3;});}).then(function(roles){return setRoles(roles);});},[]);var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleMinimo=function handleMinimo(e){var boolean=e.target.id===\"si\"?true:false;setForm(_objectSpread(_objectSpread({},form),{},{minimo:boolean}));};var handleRoles=function handleRoles(e){var array=_toConsumableArray(form.rolesId);e.target.checked?array=[].concat(_toConsumableArray(array),[e.target.value]):array.splice(form.rolesId.indexOf(e.target.value),1);setForm(_objectSpread(_objectSpread({},form),{},{rolesId:_toConsumableArray(array)}));};var handleSubmit=function handleSubmit(e){if(!isValid(form.titulo))return message.error(\"No se permiten caracteres especiales\");axios.post(\"/api/bloques\",form).then(function(res){dispatch(getBloques());history.push(\"/admin-bloques\");});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"fs-2 text-secondary m-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Crear nuevo bloque de formaci\\xF3n\"})})}),/*#__PURE__*/_jsxs(Form,{labelCol:{span:5},wrapperCol:{span:13},onFinish:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"T\\xEDtulo\",name:\"titulo\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input,{name:\"titulo\",onChange:handleChange})}),/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"Descripci\\xF3n\",name:\"descripcion\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input,{name:\"descripcion\",onChange:handleChange})}),/*#__PURE__*/_jsx(Form.Item,{className:\"admin_input\",label:\"Preguntas\",name:\"pregunta\",rules:[{required:true,message:\"Por favor complete el campo\"}],children:/*#__PURE__*/_jsx(Input.TextArea,{name:\"pregunta\",onChange:handleChange})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\xBFEs bloque m\\xEDnimo?\"}),/*#__PURE__*/_jsxs(Radio.Group,{children:[/*#__PURE__*/_jsx(Radio.Button,{id:\"si\",value:\"si\",onChange:handleMinimo,children:\"Si\"}),/*#__PURE__*/_jsx(Radio.Button,{id:\"no\",value:\"no\",onChange:handleMinimo,children:\"No\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{children:\"\\xBFA qu\\xE9 roles est\\xE1 destinado?\"}),roles.map(function(rol){return/*#__PURE__*/_jsxs(\"div\",{value:rol.id,children:[/*#__PURE__*/_jsx(\"label\",{className:\"admin_check\",htmlFor:rol.tipo,children:rol.tipo}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"roles\",value:rol.id,id:rol.id,onChange:handleRoles})]});}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(\"button\",{htmlType:\"submit\",className:\"my-3 p-2 fs-4 button-style green\",children:\"Crear\"})})]})]})]});}","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/client/src/containers/Admin/AdminBloques/CrearBloque.jsx"],"names":["axios","React","useState","useEffect","useHistory","useDispatch","useSelector","Form","Input","Radio","message","getBloques","isValid","useAuthorize","CrearBloque","rolesId","form","setForm","roles","setRoles","user","state","history","dispatch","get","then","res","data","filter","rol","id","handleChange","e","target","name","value","handleMinimo","boolean","minimo","handleRoles","array","checked","splice","indexOf","handleSubmit","titulo","error","post","push","span","required","map","tipo"],"mappings":"qeAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,KAAtB,CAA6BC,OAA7B,KAA4C,MAA5C,CACA,OAASC,UAAT,KAA2B,wBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAO,oBAAP,CACA,MAAO,oBAAP,C,6IAEA,cAAe,SAASC,CAAAA,WAAT,EAAuB,CACpC,cAAwBZ,QAAQ,CAAC,CAAEa,OAAO,CAAE,EAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eACA,eAA0Bf,QAAQ,CAAC,EAAD,CAAlC,yCAAOgB,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,IAAI,CAAGd,WAAW,CAAC,SAACe,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CACA,GAAME,CAAAA,OAAO,CAAGlB,UAAU,EAA1B,CACA,GAAMmB,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CAEAQ,YAAY,CAACO,IAAD,CAAO,CAAP,CAAZ,CAEAjB,SAAS,CAAC,UAAM,CACdH,KAAK,CACFwB,GADH,CACO,YADP,EAEGC,IAFH,CAEQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAb,EAFR,EAGGF,IAHH,CAGQ,SAACP,KAAD,QAAWA,CAAAA,KAAK,CAACU,MAAN,CAAa,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,EAAJ,EAAU,CAAnB,EAAb,CAAX,EAHR,EAIGL,IAJH,CAIQ,SAACP,KAAD,QAAWC,CAAAA,QAAQ,CAACD,KAAD,CAAnB,EAJR,EAKD,CANQ,CAMN,EANM,CAAT,CAQA,GAAMa,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1Bf,OAAO,gCAAMD,IAAN,wBAAagB,CAAC,CAACC,MAAF,CAASC,IAAtB,CAA6BF,CAAC,CAACC,MAAF,CAASE,KAAtC,GAAP,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,CAAD,CAAO,CAC1B,GAAIK,CAAAA,OAAO,CAAGL,CAAC,CAACC,MAAF,CAASH,EAAT,GAAgB,IAAhB,CAAuB,IAAvB,CAA8B,KAA5C,CACAb,OAAO,gCAAMD,IAAN,MAAYsB,MAAM,CAAED,OAApB,GAAP,CACD,CAHD,CAKA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACP,CAAD,CAAO,CACzB,GAAIQ,CAAAA,KAAK,oBAAOxB,IAAI,CAACD,OAAZ,CAAT,CACAiB,CAAC,CAACC,MAAF,CAASQ,OAAT,CACKD,KAAK,8BAAOA,KAAP,GAAcR,CAAC,CAACC,MAAF,CAASE,KAAvB,EADV,CAEIK,KAAK,CAACE,MAAN,CAAa1B,IAAI,CAACD,OAAL,CAAa4B,OAAb,CAAqBX,CAAC,CAACC,MAAF,CAASE,KAA9B,CAAb,CAAmD,CAAnD,CAFJ,CAGAlB,OAAO,gCAAMD,IAAN,MAAYD,OAAO,oBAAMyB,KAAN,CAAnB,GAAP,CACD,CAND,CAQA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACZ,CAAD,CAAO,CAC1B,GAAI,CAACpB,OAAO,CAACI,IAAI,CAAC6B,MAAN,CAAZ,CACE,MAAOnC,CAAAA,OAAO,CAACoC,KAAR,CAAc,sCAAd,CAAP,CACF9C,KAAK,CAAC+C,IAAN,CAAW,cAAX,CAA2B/B,IAA3B,EAAiCS,IAAjC,CAAsC,SAACC,GAAD,CAAS,CAC7CH,QAAQ,CAACZ,UAAU,EAAX,CAAR,CACAW,OAAO,CAAC0B,IAAR,CAAa,gBAAb,EACD,CAHD,EAID,CAPD,CASA,mBACE,wCACE,YAAK,SAAS,CAAC,OAAf,uBACE,WAAI,SAAS,CAAC,yBAAd,uBACE,8DADF,EADF,EADF,cAME,MAAC,IAAD,EACE,QAAQ,CAAE,CACRC,IAAI,CAAE,CADE,CADZ,CAIE,UAAU,CAAE,CACVA,IAAI,CAAE,EADI,CAJd,CAOE,QAAQ,CAAEL,YAPZ,wBASE,KAAC,IAAD,CAAM,IAAN,EACE,SAAS,CAAC,aADZ,CAEE,KAAK,CAAC,WAFR,CAGE,IAAI,CAAC,QAHP,CAIE,KAAK,CAAE,CACL,CACEM,QAAQ,CAAE,IADZ,CAEExC,OAAO,CAAE,6BAFX,CADK,CAJT,uBAWE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,QAAQ,CAAEqB,YAA/B,EAXF,EATF,cAuBE,KAAC,IAAD,CAAM,IAAN,EACE,SAAS,CAAC,aADZ,CAEE,KAAK,CAAC,gBAFR,CAGE,IAAI,CAAC,aAHP,CAIE,KAAK,CAAE,CACL,CACEmB,QAAQ,CAAE,IADZ,CAEExC,OAAO,CAAE,6BAFX,CADK,CAJT,uBAWE,KAAC,KAAD,EAAO,IAAI,CAAC,aAAZ,CAA0B,QAAQ,CAAEqB,YAApC,EAXF,EAvBF,cAqCE,KAAC,IAAD,CAAM,IAAN,EACE,SAAS,CAAC,aADZ,CAEE,KAAK,CAAC,WAFR,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAE,CACL,CACEmB,QAAQ,CAAE,IADZ,CAEExC,OAAO,CAAE,6BAFX,CADK,CAJT,uBAWE,KAAC,KAAD,CAAO,QAAP,EAAgB,IAAI,CAAC,UAArB,CAAgC,QAAQ,CAAEqB,YAA1C,EAXF,EArCF,cAkDE,aAAK,SAAS,CAAC,OAAf,wBACE,gDADF,cAEE,MAAC,KAAD,CAAO,KAAP,yBACE,KAAC,KAAD,CAAO,MAAP,EAAc,EAAE,CAAC,IAAjB,CAAsB,KAAK,CAAC,IAA5B,CAAiC,QAAQ,CAAEK,YAA3C,gBADF,cAIE,KAAC,KAAD,CAAO,MAAP,EAAc,EAAE,CAAC,IAAjB,CAAsB,KAAK,CAAC,IAA5B,CAAiC,QAAQ,CAAEA,YAA3C,gBAJF,GAFF,cAUE,aAVF,cAWE,6DAXF,CAYGlB,KAAK,CAACiC,GAAN,CAAU,SAACtB,GAAD,CAAS,CAClB,mBACE,aAAK,KAAK,CAAEA,GAAG,CAACC,EAAhB,wBACE,cAAO,SAAS,CAAC,aAAjB,CAA+B,OAAO,CAAED,GAAG,CAACuB,IAA5C,UACGvB,GAAG,CAACuB,IADP,EADF,cAIE,cACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAEvB,GAAG,CAACC,EAHb,CAIE,EAAE,CAAED,GAAG,CAACC,EAJV,CAKE,QAAQ,CAAES,WALZ,EAJF,GADF,CAcD,CAfA,CAZH,cA4BE,aA5BF,cA6BE,KAAC,IAAD,CAAM,IAAN,wBACE,eACE,QAAQ,CAAC,QADX,CAEE,SAAS,CAAC,kCAFZ,mBADF,EA7BF,GAlDF,GANF,GADF,CAkGD","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Form, Input, Radio, message } from \"antd\";\nimport { getBloques } from \"../../../redux/bloques\";\nimport isValid from \"../../../utils/specialChars\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport \"antd/dist/antd.css\";\nimport \"./AdminBloques.css\";\n\nexport default function CrearBloque() {\n  const [form, setForm] = useState({ rolesId: [] });\n  const [roles, setRoles] = useState([]);\n  const user = useSelector((state) => state.user);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  useAuthorize(user, 1);\n\n  useEffect(() => {\n    axios\n      .get(\"/api/roles\")\n      .then((res) => res.data)\n      .then((roles) => roles.filter((rol) => rol.id >= 3))\n      .then((roles) => setRoles(roles));\n  }, []);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleMinimo = (e) => {\n    let boolean = e.target.id === \"si\" ? true : false;\n    setForm({ ...form, minimo: boolean });\n  };\n\n  const handleRoles = (e) => {\n    let array = [...form.rolesId];\n    e.target.checked\n      ? (array = [...array, e.target.value])\n      : array.splice(form.rolesId.indexOf(e.target.value), 1);\n    setForm({ ...form, rolesId: [...array] });\n  };\n\n  const handleSubmit = (e) => {\n    if (!isValid(form.titulo))\n      return message.error(\"No se permiten caracteres especiales\");\n    axios.post(\"/api/bloques\", form).then((res) => {\n      dispatch(getBloques());\n      history.push(\"/admin-bloques\");\n    });\n  };\n\n  return (\n    <>\n      <div className=\"admin\">\n        <h1 className=\"fs-2 text-secondary m-5\">\n          <strong>Crear nuevo bloque de formación</strong>\n        </h1>\n      </div>\n      <Form\n        labelCol={{\n          span: 5,\n        }}\n        wrapperCol={{\n          span: 13,\n        }}\n        onFinish={handleSubmit}\n      >\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Título\"\n          name=\"titulo\"\n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input name=\"titulo\" onChange={handleChange} />\n        </Form.Item>\n\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Descripción\"\n          name=\"descripcion\"\n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input name=\"descripcion\" onChange={handleChange} />\n        </Form.Item>\n\n        <Form.Item\n          className=\"admin_input\"\n          label=\"Preguntas\"\n          name=\"pregunta\"\n          rules={[\n            {\n              required: true,\n              message: \"Por favor complete el campo\",\n            },\n          ]}\n        >\n          <Input.TextArea name=\"pregunta\" onChange={handleChange} />\n        </Form.Item>\n        <div className=\"admin\">\n          <h5>¿Es bloque mínimo?</h5>\n          <Radio.Group>\n            <Radio.Button id=\"si\" value=\"si\" onChange={handleMinimo}>\n              Si\n            </Radio.Button>\n            <Radio.Button id=\"no\" value=\"no\" onChange={handleMinimo}>\n              No\n            </Radio.Button>\n          </Radio.Group>\n          <br />\n          <h5>¿A qué roles está destinado?</h5>\n          {roles.map((rol) => {\n            return (\n              <div value={rol.id}>\n                <label className=\"admin_check\" htmlFor={rol.tipo}>\n                  {rol.tipo}\n                </label>\n                <input\n                  type=\"checkbox\"\n                  name=\"roles\"\n                  value={rol.id}\n                  id={rol.id}\n                  onChange={handleRoles}\n                />\n              </div>\n            );\n          })}\n          <br />\n          <Form.Item>\n            <button\n              htmlType=\"submit\"\n              className=\"my-3 p-2 fs-4 button-style green\"\n            >\n              Crear\n            </button>\n          </Form.Item>\n        </div>\n      </Form>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}