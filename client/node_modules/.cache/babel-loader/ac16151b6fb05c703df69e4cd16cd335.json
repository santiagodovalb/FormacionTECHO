{"ast":null,"code":"import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import\"./VolunteerModules.css\";import{useParams}from\"react-router\";import axios from\"axios\";import Unidades from\"./Unidades\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VolunteerModuls=function VolunteerModuls(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),contenido=_useState2[0],setContenido=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),checks=_useState4[0],_setChecks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),bloque=_useState8[0],setBloque=_useState8[1];var _useParams=useParams(),id=_useParams.id;var user=useSelector(function(state){return state.user;});var history=useHistory();useEffect(function(){var completed=[];axios.get(\"/api/bloques/\".concat(id)).then(function(res){return res.data;}).then(function(bloque){for(var i=0;i<bloque.unidades.length;i++){var _bloque$unidades$i;var _status=localStorage.getItem(\"check\".concat((_bloque$unidades$i=bloque.unidades[i])===null||_bloque$unidades$i===void 0?void 0:_bloque$unidades$i.id))===\"true\"?true:false;if(_status===true)completed.push(_status);}var status=completed.length===bloque.unidades.length?false:true;setDisabled(status);setBloque(bloque);});},[checks,id]);var handleSubmit=function handleSubmit(){axios.post(\"/api/entregas\",{contenido:contenido,bloqueId:id,userId:user.id}).then(function(){return history.push(\"/mis-entregas\");});};var handleChange=function handleChange(e){setContenido(e.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"moduls-div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"p-5 title\",children:/*#__PURE__*/_jsx(\"strong\",{children:bloque.titulo})}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-5 descripcion\",children:bloque.descripcion}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 modulos\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xF3dulos\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"unidades\",children:/*#__PURE__*/_jsx(Unidades,{setChecks:function setChecks(){return _setChecks(checks+1);}})}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 pregunta\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Preguntas del bloque: \",/*#__PURE__*/_jsx(\"br\",{}),\" \",bloque.pregunta,\" \"]})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"contenido\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{disabled:disabled,onClick:function onClick(){return handleSubmit();},className:\"my-3 p-3 fs-4 button-style green\",children:\"Entregar\"})]});};export default VolunteerModuls;","map":null,"metadata":{},"sourceType":"module"}