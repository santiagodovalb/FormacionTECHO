{"ast":null,"code":"var _jsxFileName = \"/home/santi/P5/TECHO/formacion-techo/client/src/containers/Admin/AdminDashboard/DashboardAdmin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Table } from \"antd\";\nimport axios from \"axios\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport { CSVLink } from \"react-csv\";\nimport { minimosCompletados, opcionalesCompletados, minimosTotal, opcionalesTotal } from \"../../Gestor/DashboardGestor/dashUtils\";\nimport \"./DashboardAdmin.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminDashboard() {\n  _s();\n\n  const user = useSelector(state => state.user);\n  const sedes = useSelector(state => state.sedes);\n  const users = useSelector(state => state.users);\n  const bloques = useSelector(state => state.bloques);\n  const [voluntarios, setVoluntarios] = useState([]);\n  useAuthorize(user, 1);\n  useEffect(() => {\n    axios.get('/api/users/entregas').then(res => res.data).then(voluntarios => setVoluntarios(voluntarios.filter(voluntario => voluntario.rolId > 2))).catch(err => err);\n  }, [user, bloques]);\n  const columns = [{\n    title: \"Sede\",\n    render: record => /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: record.sede\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this),\n    responsive: [\"xs\"]\n  }, {\n    title: '',\n    dataIndex: 'total',\n    key: 'total',\n    responsive: [\"sm\"]\n  }, {\n    title: 'Sede',\n    dataIndex: 'sede',\n    key: 'sede',\n    responsive: [\"sm\"]\n  }, {\n    title: 'Voluntarios',\n    dataIndex: 'voluntarios',\n    key: 'voluntarios',\n    responsive: [\"sm\"]\n  }, {\n    title: 'Gestores',\n    dataIndex: 'gestores',\n    key: 'gestores',\n    responsive: [\"sm\"]\n  }, {\n    title: 'Bloques mínimos completados',\n    dataIndex: 'minimos',\n    key: 'minimos'\n  }, {\n    title: 'Bloques opcionales completados',\n    dataIndex: 'opcionales',\n    key: 'opcionales'\n  }];\n  useAuthorize(user, 1);\n  useEffect(() => {\n    axios.get(\"/api/users/entregas\").then(res => res.data).then(voluntarios => setVoluntarios(voluntarios.filter(voluntario => voluntario.rolId > 2))).catch(err => err);\n  }, [user, bloques]);\n  const dataSource2 = sedes.map(sede => {\n    const usuarios = users.filter(user => user.sedeId === sede.id);\n    let minimosCompletos = 0;\n    let totalMinimos = 0;\n    let opcionalesCompletos = 0;\n    let totalOpcionales = 0;\n    let voluntariosDeSede = voluntarios.filter(voluntario => voluntario.sedeId === sede.id);\n    voluntariosDeSede.forEach(voluntarioDeSede => minimosCompletos = minimosCompletos + minimosCompletados(voluntarioDeSede));\n    voluntariosDeSede.forEach(voluntarioDeSede => opcionalesCompletos = opcionalesCompletos + opcionalesCompletados(voluntarioDeSede));\n    voluntariosDeSede.forEach(voluntarioDeSede => totalMinimos = totalMinimos + minimosTotal(voluntarioDeSede, bloques));\n    voluntariosDeSede.forEach(voluntarioDeSede => totalOpcionales = totalOpcionales + opcionalesTotal(voluntarioDeSede, bloques));\n    return {\n      key: sede.id,\n      total: \"\",\n      sede: sede.nombre,\n      voluntarios: usuarios.filter(user => user.rolId > 2).length,\n      gestores: usuarios.filter(user => user.rolId === 2).length,\n      minimos: `${minimosCompletos}/${totalMinimos}`,\n      opcionales: `${opcionalesCompletos}/${totalOpcionales}`\n    };\n  });\n\n  const totalMinimoCompletado = () => {\n    let total = 0;\n    voluntarios.forEach(voluntario => total = total + minimosCompletados(voluntario));\n    return total;\n  };\n\n  const totalOpcionalCompletado = () => {\n    let total = 0;\n    voluntarios.forEach(voluntario => total = total + opcionalesCompletados(voluntario));\n    return total;\n  };\n\n  const totalMinimo = () => {\n    let total = 0;\n    voluntarios.forEach(voluntario => total = total + minimosTotal(voluntario, bloques));\n    return total;\n  };\n\n  const totalOpcional = () => {\n    let total = 0;\n    voluntarios.forEach(voluntario => total = total + opcionalesTotal(voluntario, bloques));\n    return total;\n  };\n\n  const dataSource = [...dataSource2, {\n    key: \"total\",\n    total: \"Total\",\n    sede: sedes.length,\n    voluntarios: users.filter(user => user.rolId > 2).length,\n    gestores: users.filter(user => user.rolId === 2).length,\n    minimos: `${totalMinimoCompletado()}/${totalMinimo()}`,\n    opcionales: `${totalOpcionalCompletado()}/${totalOpcional()}`\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"fs-2 text-secondary p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Dashboard Nacional\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center\",\n      children: dataSource && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success my-3 fs-5\",\n        children: /*#__PURE__*/_jsxDEV(CSVLink, {\n          data: dataSource,\n          filename: `dashboard-nacional.csv`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-light m-0\",\n            children: [\"Descargar \", /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-file-earmark-excel-fill\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table\",\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        bordered: true,\n        dataSource: dataSource,\n        columns: columns,\n        pagination: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminDashboard, \"qQzwa3i7mrMfN4WbmBVxiD7pvZw=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useAuthorize, useAuthorize];\n});\n\n_c = AdminDashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/client/src/containers/Admin/AdminDashboard/DashboardAdmin.jsx"],"names":["React","useState","useEffect","useSelector","Table","axios","useAuthorize","CSVLink","minimosCompletados","opcionalesCompletados","minimosTotal","opcionalesTotal","AdminDashboard","user","state","sedes","users","bloques","voluntarios","setVoluntarios","get","then","res","data","filter","voluntario","rolId","catch","err","columns","title","render","record","sede","responsive","dataIndex","key","dataSource2","map","usuarios","sedeId","id","minimosCompletos","totalMinimos","opcionalesCompletos","totalOpcionales","voluntariosDeSede","forEach","voluntarioDeSede","total","nombre","length","gestores","minimos","opcionales","totalMinimoCompletado","totalOpcionalCompletado","totalMinimo","totalOpcional","dataSource"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Table } from \"antd\";\nimport axios from \"axios\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport { CSVLink } from \"react-csv\";\nimport {\n  minimosCompletados,\n  opcionalesCompletados,\n  minimosTotal,\n  opcionalesTotal,\n} from \"../../Gestor/DashboardGestor/dashUtils\";\nimport \"./DashboardAdmin.css\";\n\nexport default function AdminDashboard(){\n    const user = useSelector(state => state.user)\n    const sedes = useSelector(state=> state.sedes)\n    const users = useSelector(state => state.users)\n    const bloques = useSelector(state => state.bloques)\n    const [voluntarios, setVoluntarios] = useState([])\n    \n    useAuthorize(user, 1)\n    \n    \n    useEffect(() => {\n        \n        axios.get('/api/users/entregas')\n        .then(res => res.data)\n        .then(voluntarios => setVoluntarios(voluntarios.filter(voluntario => voluntario.rolId > 2)))\n        .catch(err => err)\n    }, [user,bloques])\n    const columns = [\n        {\n          title: \"Sede\",\n          render: (record) => (\n            <React.Fragment>\n              {record.sede}\n            </React.Fragment>\n          ),\n          responsive: [\"xs\"],\n        },\n        {\n            title: '',\n            dataIndex: 'total',\n            key: 'total',\n            responsive: [\"sm\"],\n        },\n        {\n            title: 'Sede',\n            dataIndex: 'sede',\n            key: 'sede',\n            responsive: [\"sm\"],\n        },\n        {\n            title: 'Voluntarios',\n            dataIndex: 'voluntarios',\n            key: 'voluntarios',\n            responsive: [\"sm\"],\n        },\n        {\n            title: 'Gestores',\n            dataIndex: 'gestores',\n            key:'gestores',\n            responsive: [\"sm\"],\n        },\n        {\n            title: 'Bloques mínimos completados',\n            dataIndex: 'minimos',\n            key:'minimos'\n        },\n        {\n            title: 'Bloques opcionales completados',\n            dataIndex: 'opcionales',\n            key:'opcionales'\n        },\n    ]\n\n  useAuthorize(user, 1);\n\n  useEffect(() => {\n    axios\n      .get(\"/api/users/entregas\")\n      .then((res) => res.data)\n      .then((voluntarios) =>\n        setVoluntarios(voluntarios.filter((voluntario) => voluntario.rolId > 2))\n      )\n      .catch((err) => err);\n  }, [user, bloques]);\n  \n  const dataSource2 = sedes.map((sede) => {\n    const usuarios = users.filter((user) => user.sedeId === sede.id);\n    let minimosCompletos = 0;\n    let totalMinimos = 0;\n    let opcionalesCompletos = 0;\n    let totalOpcionales = 0;\n    let voluntariosDeSede = voluntarios.filter(\n      (voluntario) => voluntario.sedeId === sede.id\n    );\n    voluntariosDeSede.forEach(\n      (voluntarioDeSede) =>\n        (minimosCompletos =\n          minimosCompletos + minimosCompletados(voluntarioDeSede))\n    );\n    voluntariosDeSede.forEach(\n      (voluntarioDeSede) =>\n        (opcionalesCompletos =\n          opcionalesCompletos + opcionalesCompletados(voluntarioDeSede))\n    );\n    voluntariosDeSede.forEach(\n      (voluntarioDeSede) =>\n        (totalMinimos = totalMinimos + minimosTotal(voluntarioDeSede, bloques))\n    );\n    voluntariosDeSede.forEach(\n      (voluntarioDeSede) =>\n        (totalOpcionales =\n          totalOpcionales + opcionalesTotal(voluntarioDeSede, bloques))\n    );\n    return {\n      key: sede.id,\n      total: \"\",\n      sede: sede.nombre,\n      voluntarios: usuarios.filter((user) => user.rolId > 2).length,\n      gestores: usuarios.filter((user) => user.rolId === 2).length,\n      minimos: `${minimosCompletos}/${totalMinimos}`,\n      opcionales: `${opcionalesCompletos}/${totalOpcionales}`,\n    };\n  });\n\n  const totalMinimoCompletado = () => {\n    let total = 0;\n    voluntarios.forEach(\n      (voluntario) => (total = total + minimosCompletados(voluntario))\n    );\n    return total;\n  };\n\n  const totalOpcionalCompletado = () => {\n    let total = 0;\n    voluntarios.forEach(\n      (voluntario) => (total = total + opcionalesCompletados(voluntario))\n    );\n    return total;\n  };\n\n  const totalMinimo = () => {\n    let total = 0;\n    voluntarios.forEach(\n      (voluntario) => (total = total + minimosTotal(voluntario, bloques))\n    );\n    return total;\n  };\n\n  const totalOpcional = () => {\n    let total = 0;\n    voluntarios.forEach(\n      (voluntario) => (total = total + opcionalesTotal(voluntario, bloques))\n    );\n    return total;\n  };\n\n  const dataSource = [\n    ...dataSource2,\n    {\n      key: \"total\",\n      total: \"Total\",\n      sede: sedes.length,\n      voluntarios: users.filter((user) => user.rolId > 2).length,\n      gestores: users.filter((user) => user.rolId === 2).length,\n      minimos: `${totalMinimoCompletado()}/${totalMinimo()}`,\n      opcionales: `${totalOpcionalCompletado()}/${totalOpcional()}`,\n    },\n  ];\n\n  return (\n    <div className=\"text-center\">\n      <h1 className=\"fs-2 text-secondary p-5\">\n        <strong>Dashboard Nacional</strong>\n      </h1>\n      <div className=\"d-flex justify-content-center\">\n        {dataSource && (\n          <button className=\"btn btn-success my-3 fs-5\">\n            <CSVLink data={dataSource} filename={`dashboard-nacional.csv`}>\n              <p className=\"text-light m-0\">\n                Descargar <i className=\"bi bi-file-earmark-excel-fill\"></i>\n              </p>\n            </CSVLink>\n          </button>\n        )}\n      </div>\n      <div className=\"table\">\n        <Table\n          bordered\n          dataSource={dataSource}\n          columns={columns}\n          pagination={false}\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}