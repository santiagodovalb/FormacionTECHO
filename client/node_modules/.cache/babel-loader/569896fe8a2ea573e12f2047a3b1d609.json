{"ast":null,"code":"import _defineProperty from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Swal from\"sweetalert2\";import{getSedes}from\"../../../redux/sedes\";import{Table,message}from\"antd\";import useAuthorize from\"../../../utils/authorization\";import isValid from\"../../../utils/specialChars\";import\"./AdminSedes.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Sedes(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var sedes=useSelector(function(state){return state.sedes;});var dispatch=useDispatch();var user=useSelector(function(state){return state.user;});var toggleForm=function toggleForm(id){document.getElementById(id).style.display=document.getElementById(id).style.display===\"block\"?\"none\":\"block\";};var handleSubmit=function handleSubmit(e,id){e.preventDefault();if(!isValid(form.nombre))return message.error(\"No se permiten caracteres especiales\");axios.post(\"/api/sedes/\".concat(id),form).then(function(res){return res.data;}).then(function(){return dispatch(getSedes());});};var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var alertaEliminar=Swal.mixin({buttonsStyling:true});var handleDelete=function handleDelete(id){alertaEliminar.fire({title:\"Estás seguro?\",text:\"Si lo confirmas, no podrás deshacerlo!\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Si, borrar!\",cancelButtonText:\"No, cancelar!\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",reverseButtons:true}).then(function(result){if(result.isConfirmed){alertaEliminar.fire(\"Eliminado!\",\"La sede fue eliminada correctamente.\",\"success\");axios.delete(\"/api/sedes/\".concat(id)).then(function(){return dispatch(getSedes());});message.success(\"Sede eliminada correctamente\");}else if(result.dismiss===Swal.DismissReason.cancel){alertaEliminar.fire(\"Cancelado\",\"La sede está a salvo\",\"error\");}});};useAuthorize(user,1);var dataSource=sedes.map(function(sede){return{key:sede.id,nombre:sede.nombre,comunidadId:sede.comunidadId};});var columns=[{title:\"Sede\",render:function render(record){return/*#__PURE__*/_jsxs(React.Fragment,{children:[record.nombre,/*#__PURE__*/_jsx(\"hr\",{}),record.comunidadId]});},responsive:[\"xs\"]},{title:\"Sede\",dataIndex:\"nombre\",key:\"nombre\",responsive:[\"sm\"]},{title:\"Comunidad ID\",dataIndex:\"comunidadId\",key:\"comunidadId\",responsive:[\"sm\"]},{title:\"Modificar/eliminar\",key:\"modificar/eliminar\",render:function render(text,record){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(record.key);},className:\"btn btn-outline-danger mx-1\",children:\"Eliminar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return toggleForm(\"sedeForm\".concat(record.key));},className:\"btn btn-outline-primary mx-1\",children:\"Modificar\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sedesForm\",onSubmit:function onSubmit(e){return handleSubmit(e,record.key);},id:\"sedeForm\".concat(record.key),style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"text\",name:\"nombre\",placeholder:record.nombre,className:\"form-control\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comunidadId\",children:\"Comunidad ID\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"number\",name:\"comunidadId\",placeholder:record.comunidadId,className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mx-1\",type:\"submit\",children:\"Confirmar cambios\"})]})]});}}];return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Table,{bordered:true,dataSource:dataSource,columns:columns,pagination:false})});}","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/client/src/containers/Admin/AdminSedes/ListaSedes.jsx"],"names":["axios","React","useState","useDispatch","useSelector","Swal","getSedes","Table","message","useAuthorize","isValid","Sedes","form","setForm","sedes","state","dispatch","user","toggleForm","id","document","getElementById","style","display","handleSubmit","e","preventDefault","nombre","error","post","then","res","data","handleChange","target","name","value","alertaEliminar","mixin","buttonsStyling","handleDelete","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","confirmButtonColor","cancelButtonColor","reverseButtons","result","isConfirmed","delete","success","dismiss","DismissReason","cancel","dataSource","map","sede","key","comunidadId","columns","render","record","responsive","dataIndex"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Swal from \"sweetalert2\";\nimport { getSedes } from \"../../../redux/sedes\";\nimport { Table, message } from \"antd\";\nimport useAuthorize from \"../../../utils/authorization\";\nimport isValid from \"../../../utils/specialChars\";\nimport \"./AdminSedes.css\";\n\nexport default function Sedes() {\n  const [form, setForm] = useState({});\n\n  const sedes = useSelector((state) => state.sedes);\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.user);\n\n  const toggleForm = (id) => {\n    document.getElementById(id).style.display =\n      document.getElementById(id).style.display === \"block\" ? \"none\" : \"block\";\n  };\n\n  const handleSubmit = (e, id) => {\n    e.preventDefault();\n    if (!isValid(form.nombre))\n      return message.error(\"No se permiten caracteres especiales\");\n    axios\n      .post(`/api/sedes/${id}`, form)\n      .then((res) => res.data)\n      .then(() => dispatch(getSedes()));\n  };\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const alertaEliminar = Swal.mixin({\n    buttonsStyling: true,\n  });\n\n  const handleDelete = (id) => {\n    alertaEliminar\n      .fire({\n        title: \"Estás seguro?\",\n        text: \"Si lo confirmas, no podrás deshacerlo!\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"Si, borrar!\",\n        cancelButtonText: \"No, cancelar!\",\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        reverseButtons: true,\n      })\n      .then((result) => {\n        if (result.isConfirmed) {\n          alertaEliminar.fire(\n            \"Eliminado!\",\n            \"La sede fue eliminada correctamente.\",\n            \"success\"\n          );\n          axios.delete(`/api/sedes/${id}`).then(() => dispatch(getSedes()));\n          message.success(\"Sede eliminada correctamente\");\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          alertaEliminar.fire(\"Cancelado\", \"La sede está a salvo\", \"error\");\n        }\n      });\n  };\n\n  useAuthorize(user, 1);\n\n  const dataSource = sedes.map((sede) => {\n    return {\n      key: sede.id,\n      nombre: sede.nombre,\n      comunidadId: sede.comunidadId,\n    };\n  });\n\n  const columns = [\n    {\n      title: \"Sede\",\n      render: (record) => (\n        <React.Fragment>\n          {record.nombre}\n          <hr />\n          {record.comunidadId}\n        </React.Fragment>\n      ),\n      responsive: [\"xs\"],\n    },\n    {\n      title: \"Sede\",\n      dataIndex: \"nombre\",\n      key: \"nombre\",\n      responsive: [\"sm\"],\n    },\n    {\n      title: \"Comunidad ID\",\n      dataIndex: \"comunidadId\",\n      key: \"comunidadId\",\n      responsive: [\"sm\"]\n    },\n    {\n      title: \"Modificar/eliminar\",\n      key: \"modificar/eliminar\",\n      render: (text, record) => {\n        return (\n          <div>\n            <button\n              onClick={() => handleDelete(record.key)}\n              className=\"btn btn-outline-danger mx-1\"\n            >\n              Eliminar\n            </button>\n            <button\n              onClick={() => toggleForm(`sedeForm${record.key}`)}\n              className=\"btn btn-outline-primary mx-1\"\n            >\n              Modificar\n            </button>\n            <form\n              className=\"sedesForm\"\n              onSubmit={(e) => handleSubmit(e, record.key)}\n              id={`sedeForm${record.key}`}\n              style={{ display: \"none\" }}\n            >\n              <label htmlFor=\"nombre\">Nombre</label>\n              <input\n                onChange={handleChange}\n                type=\"text\"\n                name=\"nombre\"\n                placeholder={record.nombre}\n                className=\"form-control\"\n              ></input>\n              <label htmlFor=\"comunidadId\">Comunidad ID</label>\n              <input\n                onChange={handleChange}\n                type=\"number\"\n                name=\"comunidadId\"\n                placeholder={record.comunidadId}\n                className=\"form-control\"\n              ></input>\n              <button className=\"btn btn-success mx-1\" type=\"submit\">\n                Confirmar cambios\n              </button>\n            </form>\n          </div>\n        );\n      },\n    },\n  ];\n\n  return (\n    <div>\n      <Table\n        bordered\n        dataSource={dataSource}\n        columns={columns}\n        pagination={false}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}