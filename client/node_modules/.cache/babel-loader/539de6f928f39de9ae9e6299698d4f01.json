{"ast":null,"code":"import _slicedToArray from\"/home/santi/P5/TECHO/formacion-techo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import\"./VolunteerModules.css\";import{useParams}from\"react-router\";import axios from\"axios\";import Unidades from\"./Unidades\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VolunteerModuls=function VolunteerModuls(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),contenido=_useState2[0],setContenido=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),checks=_useState4[0],_setChecks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),bloque=_useState8[0],setBloque=_useState8[1];var _useParams=useParams(),id=_useParams.id;var user=useSelector(function(state){return state.user;});var history=useHistory();useEffect(function(){var completed=[];axios.get(\"/api/bloques/\".concat(id)).then(function(res){return res.data;}).then(function(bloque){for(var i=0;i<bloque.unidades.length;i++){var _bloque$unidades$i;var _status=localStorage.getItem(\"check\".concat((_bloque$unidades$i=bloque.unidades[i])===null||_bloque$unidades$i===void 0?void 0:_bloque$unidades$i.id))===\"true\"?true:false;if(_status===true)completed.push(_status);}var status=completed.length===bloque.unidades.length?false:true;setDisabled(status);setBloque(bloque);});},[checks,id]);var handleSubmit=function handleSubmit(){axios.post(\"/api/entregas\",{contenido:contenido,bloqueId:id,userId:user.id}).then(function(){return history.push(\"/mis-entregas\");});};var handleChange=function handleChange(e){setContenido(e.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"moduls-div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"p-5 title\",children:/*#__PURE__*/_jsx(\"strong\",{children:bloque.titulo})}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-5 descripcion\",children:bloque.descripcion}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 modulos\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xF3dulos\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"unidades\",children:/*#__PURE__*/_jsx(Unidades,{setChecks:function setChecks(){return _setChecks(checks+1);}})}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 pregunta\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Preguntas del bloque: \",/*#__PURE__*/_jsx(\"br\",{}),\" \",bloque.pregunta,\" \"]})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"contenido\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{disabled:disabled,onClick:function onClick(){return handleSubmit();},className:\"my-3 p-3 fs-4 button-style green\",children:\"Entregar\"})]});};export default VolunteerModuls;","map":{"version":3,"sources":["/home/santi/P5/TECHO/formacion-techo/client/src/containers/Volunteer/VolunteerModuls/VolunteerModules.jsx"],"names":["React","useState","useEffect","useSelector","useParams","axios","Unidades","useHistory","VolunteerModuls","contenido","setContenido","checks","setChecks","disabled","setDisabled","bloque","setBloque","id","user","state","history","completed","get","then","res","data","i","unidades","length","status","localStorage","getItem","push","handleSubmit","post","bloqueId","userId","handleChange","e","target","value","titulo","descripcion","pregunta"],"mappings":"uHAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAO,wBAAP,CACA,OAASC,SAAT,KAA0B,cAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,cAAkCP,QAAQ,CAAC,EAAD,CAA1C,wCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAA4BT,QAAQ,CAAC,CAAD,CAApC,yCAAOU,MAAP,eAAeC,UAAf,eACA,eAAgCX,QAAQ,CAAC,KAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAA4Bb,QAAQ,CAAC,EAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eACA,eAAeZ,SAAS,EAAxB,CAAQa,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,IAAI,CAAGf,WAAW,CAAC,SAACgB,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CACA,GAAME,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAEAL,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,SAAS,CAAG,EAAlB,CACAhB,KAAK,CACFiB,GADH,wBACuBL,EADvB,GAEGM,IAFH,CAEQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAb,EAFR,EAGGF,IAHH,CAGQ,SAACR,MAAD,CAAY,CAChB,IAAK,GAAIW,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGX,MAAM,CAACY,QAAP,CAAgBC,MAApC,CAA4CF,CAAC,EAA7C,CAAiD,wBAC/C,GAAIG,CAAAA,OAAM,CACRC,YAAY,CAACC,OAAb,oCAA6BhB,MAAM,CAACY,QAAP,CAAgBD,CAAhB,CAA7B,6CAA6B,mBAAoBT,EAAjD,KAA2D,MAA3D,CACI,IADJ,CAEI,KAHN,CAIA,GAAIY,OAAM,GAAK,IAAf,CAAqBR,SAAS,CAACW,IAAV,CAAeH,OAAf,EACtB,CACD,GAAMA,CAAAA,MAAM,CACVR,SAAS,CAACO,MAAV,GAAqBb,MAAM,CAACY,QAAP,CAAgBC,MAArC,CAA8C,KAA9C,CAAsD,IADxD,CAEAd,WAAW,CAACe,MAAD,CAAX,CACAb,SAAS,CAACD,MAAD,CAAT,CACD,CAfH,EAgBD,CAlBQ,CAkBN,CAACJ,MAAD,CAASM,EAAT,CAlBM,CAAT,CAoBA,GAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB5B,KAAK,CACF6B,IADH,CACQ,eADR,CACyB,CACrBzB,SAAS,CAAEA,SADU,CAErB0B,QAAQ,CAAElB,EAFW,CAGrBmB,MAAM,CAAElB,IAAI,CAACD,EAHQ,CADzB,EAMGM,IANH,CAMQ,iBAAMH,CAAAA,OAAO,CAACY,IAAR,CAAa,eAAb,CAAN,EANR,EAOD,CARD,CAUA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B5B,YAAY,CAAC4B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,CACD,CAFD,CAIA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,WAAI,SAAS,CAAC,WAAd,uBACE,wBAASzB,MAAM,CAAC0B,MAAhB,EADF,EADF,cAIE,UAAG,SAAS,CAAC,kBAAb,UAAiC1B,MAAM,CAAC2B,WAAxC,EAJF,cAME,UAAG,SAAS,CAAC,cAAb,uBACE,sCADF,EANF,cASE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,QAAD,EAAU,SAAS,CAAE,2BAAM9B,CAAAA,UAAS,CAACD,MAAM,CAAG,CAAV,CAAf,EAArB,EADF,EATF,cAYE,UAAG,SAAS,CAAC,eAAb,uBACE,gEACwB,aADxB,KACgCI,MAAM,CAAC4B,QADvC,CACiD,GADjD,GADF,EAZF,cAiBE,iBACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,WAFP,CAGE,QAAQ,CAAEN,YAHZ,EAjBF,cAsBE,eACE,QAAQ,CAAExB,QADZ,CAEE,OAAO,CAAE,yBAAMoB,CAAAA,YAAY,EAAlB,EAFX,CAGE,SAAS,CAAC,kCAHZ,sBAtBF,GADF,CAgCD,CA3ED,CA6EA,cAAezB,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"./VolunteerModules.css\";\nimport { useParams } from \"react-router\";\nimport axios from \"axios\";\nimport Unidades from \"./Unidades\";\nimport { useHistory } from \"react-router-dom\";\n\nconst VolunteerModuls = () => {\n  const [contenido, setContenido] = useState(\"\");\n  const [checks, setChecks] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [bloque, setBloque] = useState({});\n  const { id } = useParams();\n  const user = useSelector((state) => state.user);\n  const history = useHistory();\n\n  useEffect(() => {\n    const completed = [];\n    axios\n      .get(`/api/bloques/${id}`)\n      .then((res) => res.data)\n      .then((bloque) => {\n        for (let i = 0; i < bloque.unidades.length; i++) {\n          let status =\n            localStorage.getItem(`check${bloque.unidades[i]?.id}`) === \"true\"\n              ? true\n              : false;\n          if (status === true) completed.push(status);\n        }\n        const status =\n          completed.length === bloque.unidades.length ? false : true;\n        setDisabled(status);\n        setBloque(bloque);\n      });\n  }, [checks, id]);\n\n  const handleSubmit = () => {\n    axios\n      .post(\"/api/entregas\", {\n        contenido: contenido,\n        bloqueId: id,\n        userId: user.id,\n      })\n      .then(() => history.push(\"/mis-entregas\"));\n  };\n\n  const handleChange = (e) => {\n    setContenido(e.target.value);\n  };\n\n  return (\n    <div className=\"moduls-div\">\n      <h1 className=\"p-5 title\">\n        <strong>{bloque.titulo}</strong>\n      </h1>\n      <p className=\"fs-5 descripcion\">{bloque.descripcion}</p>\n\n      <p className=\"fs-4 modulos\">\n        <strong>MÃ³dulos</strong>\n      </p>\n      <div className=\"unidades\">\n        <Unidades setChecks={() => setChecks(checks + 1)} />\n      </div>\n      <p className=\"fs-4 pregunta\">\n        <strong>\n          Preguntas del bloque: <br /> {bloque.pregunta}{\" \"}\n        </strong>\n      </p>\n      <textarea\n        className=\"form-control\"\n        name=\"contenido\"\n        onChange={handleChange}\n      />\n      <button\n        disabled={disabled}\n        onClick={() => handleSubmit()}\n        className=\"my-3 p-3 fs-4 button-style green\"\n      >\n        Entregar\n      </button>\n    </div>\n  );\n};\n\nexport default VolunteerModuls;\n"]},"metadata":{},"sourceType":"module"}